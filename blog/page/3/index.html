
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="关于软件、Geek | Ray，Web & Mobile Lover，Software Engineer | 这里是 @Ray睿 类喵星人的个人博客。专注求索，创新">
      
      
        <meta name="author" content="Ray-X">
      
      
        <link rel="canonical" href="https://ray-x.github.io/blog/page/3/">
      
      
        <link rel="prev" href="../../..">
      
      
        <link rel="next" href="../../archive/2024/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Blog - Ray-X</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


  
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
  
  <style>.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"/></svg>');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"/></svg>');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"/></svg>');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');}.md-tag.md-tag--go{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.811 10.231c-.047 0-.058-.023-.035-.059l.246-.315c.023-.035.081-.058.128-.058h4.172c.046 0 .058.035.035.07l-.199.303c-.023.036-.082.07-.117.07zM.047 11.306c-.047 0-.059-.023-.035-.058l.245-.316c.023-.035.082-.058.129-.058h5.328c.047 0 .07.035.058.07l-.093.28c-.012.047-.058.07-.105.07zm2.828 1.075c-.047 0-.059-.035-.035-.07l.163-.292c.023-.035.07-.07.117-.07h2.337c.047 0 .07.035.07.082l-.023.28c0 .047-.047.082-.082.082zm12.129-2.36c-.736.187-1.239.327-1.963.514-.176.046-.187.058-.34-.117-.174-.199-.303-.327-.548-.444-.737-.362-1.45-.257-2.115.175-.795.514-1.204 1.274-1.192 2.22.011.935.654 1.706 1.577 1.835.795.105 1.46-.175 1.987-.77.105-.13.198-.27.315-.434H10.47c-.245 0-.304-.152-.222-.35.152-.362.432-.97.596-1.274a.315.315 0 0 1 .292-.187h4.253c-.023.316-.023.631-.07.947a4.983 4.983 0 0 1-.958 2.29c-.841 1.11-1.94 1.8-3.33 1.986-1.145.152-2.209-.07-3.143-.77-.865-.655-1.356-1.52-1.484-2.595-.152-1.274.222-2.419.993-3.424.83-1.086 1.928-1.776 3.272-2.02 1.098-.2 2.15-.07 3.096.571.62.41 1.063.97 1.356 1.648.07.105.023.164-.117.2m3.868 6.461c-1.064-.024-2.034-.328-2.852-1.029a3.665 3.665 0 0 1-1.262-2.255c-.21-1.32.152-2.489.947-3.529.853-1.122 1.881-1.706 3.272-1.95 1.192-.21 2.314-.095 3.33.595.923.63 1.496 1.484 1.648 2.605.198 1.578-.257 2.863-1.344 3.962-.771.783-1.718 1.273-2.805 1.495-.315.06-.63.07-.934.106zm2.78-4.72c-.011-.153-.011-.27-.034-.387-.21-1.157-1.274-1.81-2.384-1.554-1.087.245-1.788.935-2.045 2.033-.21.912.234 1.835 1.075 2.21.643.28 1.285.244 1.905-.07.923-.48 1.425-1.228 1.484-2.233z"/></svg>');}</style>

    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link rel="stylesheet" href="../../../stylesheets/custom.00c04c01.min.css">
  <link rel="stylesheet" href="../../../stylesheets/main.css">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
  Build something fun with <strong>@ray-x</strong> on
  <a href="https://twitter.com/x_II_x">
    <span class="twemoji twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </span>
    <strong>Twitter</strong>
  </a>

          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Ray-X" class="md-header__button md-logo" aria-label="Ray-X" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ray-X
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ray-x" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-x.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Ray-X" class="md-nav__button md-logo" aria-label="Ray-X" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    Ray-X
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ray-x" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-x.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    latest
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            latest
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023/12/20/asyncio-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asyncio python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023/12/19/python-django-restful-framework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Django Restful Framework
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    tags
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            tags
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tags
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog<a class="headerlink" href="#blog" title="Permanent link">&para;</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-10 00:00:00">June 10, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="how-keys-was-defined-in-terminal"><a class="toclink" href="../../2020/06/10/keycode-in-terminal-for-vimneovim/">How keys was defined in terminal</a></h2>
<p>This had never been a issue until I give up vimr and use kitty + neovim. I found that my <code>&lt;S-Fn&gt;</code> no longer works.</p>
<p>Well, do panic, use <code>infocmp</code> or <code>keybind</code> or <code>keycode</code> to find out how the key is defined (also can use <code>cat</code> or <code>sed
-n -l</code>).
For kitty <code>&lt;S-F1&gt;</code> key code is <code>^[[1;2P</code> . Here <code>^[</code> means <code>&lt;Esc&gt;</code> or <code>\E</code></p>
<p>vim and neovim handle key code slight different.</p>
<p>for neovim, S-Fn was map to F(12+n) , e.g. S-f1 mapped to F13.
So you can do this:</p>
<p><div class="language-vim highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>    map <span class="p">&lt;</span>F13<span class="p">&gt;</span> <span class="p">&lt;</span>S<span class="p">-</span>F1<span class="p">&gt;</span>
</span></code></pre></div>
vim is slightly different. <code>:help keycode</code></p>
<div class="language-vim highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>    <span class="k">set</span> <span class="p">&lt;</span>S<span class="p">-</span>F1<span class="p">&gt;=</span>^[[<span class="m">1</span>;<span class="m">2</span>P
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    map <span class="p">&lt;</span>Esc<span class="p">&gt;</span>[<span class="m">1</span>;<span class="m">2</span>P <span class="p">&lt;</span>S<span class="p">-</span>F1<span class="p">&gt;</span>
</span></code></pre></div>
<p>So put it all together
<div class="language-vim highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">if</span> <span class="p">!</span>has<span class="p">(</span><span class="s2">&quot;gui_running&quot;</span><span class="p">)</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>  <span class="k">if</span> <span class="p">!</span>has<span class="p">(</span><span class="s1">&#39;nvim&#39;</span><span class="p">)</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="k">set</span> <span class="p">&lt;</span>S<span class="p">-</span>F1<span class="p">&gt;=</span>^[[<span class="m">1</span>;<span class="m">2</span>P
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    map <span class="p">&lt;</span>Esc<span class="p">&gt;</span>[<span class="m">1</span>;<span class="m">2</span>P <span class="p">&lt;</span>S<span class="p">-</span>F1<span class="p">&gt;</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="k">set</span> <span class="p">&lt;</span>S<span class="p">-</span>F2<span class="p">&gt;=</span>^[[<span class="m">1</span>;<span class="m">2</span>Q
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    map <span class="p">&lt;</span>Esc<span class="p">&gt;</span>[<span class="m">1</span>;<span class="m">2</span>Q <span class="p">&lt;</span>S<span class="p">-</span>F2<span class="p">&gt;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="k">set</span> <span class="p">&lt;</span>S<span class="p">-</span>F3<span class="p">&gt;=</span>^[[<span class="m">1</span>;<span class="m">2</span>R
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    map <span class="p">&lt;</span>Esc<span class="p">&gt;</span>[<span class="m">1</span>;<span class="m">2</span>R <span class="p">&lt;</span>S<span class="p">-</span>F3<span class="p">&gt;</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>  <span class="k">else</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    map <span class="p">&lt;</span>F13<span class="p">&gt;</span> <span class="p">&lt;</span>S<span class="p">-</span>F1<span class="p">&gt;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    map <span class="p">&lt;</span>F14<span class="p">&gt;</span> <span class="p">&lt;</span>S<span class="p">-</span>F4<span class="p">&gt;</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    map <span class="p">&lt;</span>F15<span class="p">&gt;</span> <span class="p">&lt;</span>S<span class="p">-</span>F5<span class="p">&gt;</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    map <span class="p">&lt;</span>F16<span class="p">&gt;</span> <span class="p">&lt;</span>S<span class="p">-</span>F6<span class="p">&gt;</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>  <span class="k">endif</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="k">endif</span>
</span></code></pre></div></p>
    <nav class="md-post__action">
      <a href="../../2020/06/10/keycode-in-terminal-for-vimneovim/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-06 00:00:00">June 6, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="vim-as-a-programming-ide"><a class="toclink" href="../../2020/06/06/sharing-my-dotfilesvimkittyzsh-configuration/">vim as a programming ide</a></h2>
<p>I used to use slickedit, qt-creator, idea (webstorm, goland), vscode, but I am back to vi now. Thanks for <code>Plug</code> I do
not need to configure my setup everytime....... I am still using sublime edit(as a notepad)</p>
<p>vimr is one of the best nvim-gui. But it does not in active development in last 3 months(It is hard for a one developer
project), some of the crash durning coding is annoying. I only use nvim/vim + kitty now.</p>
<ul>
<li>
<p>nvim+kitty configured with pop menu:</p>
<p><img alt="vim_ide with nvim+kitty" src="https://raw.githubusercontent.com/ray-x/dotfiles/master/img/menu.jpg" /></p>
</li>
<li>
<p>nvim clap preview:</p>
<p><img alt="vim_ide with nvim+kitty" src="https://raw.githubusercontent.com/ray-x/dotfiles/master/img/clap.jpg" /></p>
</li>
<li>
<p>nvim+kitty coc+ale:</p>
<p><img alt="vim_ide with nvim+kitty" src="https://raw.githubusercontent.com/ray-x/dotfiles/master/img/coc_float_errorcheck.jpg" /></p>
</li>
</ul>
<h3 id="vim-plugins"><a class="toclink" href="../../2020/06/06/sharing-my-dotfilesvimkittyzsh-configuration/#vim-plugins">Vim Plugins</a></h3>
<p>I used following plugin a lots</p>
<ul>
<li><code>Plug</code></li>
</ul>
<p>Plugin management tool</p>
<ul>
<li>vim-clap</li>
</ul>
<p>Best plugin for search anything. I used it to replace fzf, leaderF, leaderP, NerdTree, Ag/Ack/Rg, yank(ring), project management. undolist and many more</p>
<ul>
<li>coc.nvim</li>
</ul>
<p>I disabled vim-go and turn to coc-go. Replace defx with coc-explorer, use coc-spell for spell check
   coc-snippet replaced my ultisnips. Also, there are coc for yml, json, prettier, python, rust, PHP (any language vs code
   supported)......</p>
<ul>
<li>ALE</li>
</ul>
<p>well, I am still using ALE and configure lots of lint tool with it.</p>
<ul>
<li>Programming support:</li>
</ul>
<p>YCM (used to be my favourite, only for C++ and python now), but I am using coc.nvim more offen now,
  vim-go(for go testing, highlight, gopls disabled),CompleteParameter, emmet-vim, tagbar/vista, polygot,
  and some language specific plugins (e.g html, js/ts, swift), ctags/gutentags, vim-less, govim(macvim only, with some cool AST)</p>
<ul>
<li>Debug:</li>
</ul>
<p>vimspector</p>
<ul>
<li>Theme, look&amp;feel:</li>
</ul>
<p>onedark, eleline, devicons, startify, powerline, indentLine(with nerdfont),</p>
<ul>
<li>Color:</li>
</ul>
<p>nvim-colorizer.lua (display hex and color in highlight), rainbow, log-highlight, limelight, interestingwords</p>
<ul>
<li>Git:</li>
</ul>
<p>fugitive, gv, coc-git</p>
<ul>
<li>Format:</li>
</ul>
<p>tabular, coc-prettier(or, sometimes prettier), auto-pair</p>
<ul>
<li>
<p>Menu and tab:
  quickui(created a menu for the function/keybind I used less often. I can not rememeber all the commands and keybinds....)
  wintab: one of the best buffer management tool</p>
</li>
<li>
<p>Tools: floatterm, coc-todolist</p>
</li>
<li>
<p>Move and Edit:</p>
</li>
</ul>
<p>easymotion, multi-cursor (has ome bugs with auto-complete. check this: <a href="https://medium.com/@schtoeffel/you-don-t-need-more-than-one-cursor-in-vim-2c44117d51db">You don’t need more than one cursor in vim</a>
), vim-anyfold (better folding)</p>
<h3 id="shell"><a class="toclink" href="../../2020/06/06/sharing-my-dotfilesvimkittyzsh-configuration/#shell">Shell</a></h3>
<ul>
<li>OMZshell is good, iterm2 is popular, but I turned to zprezto(with powerlevel10) + kitty. It is cooool and faster, check this:</li>
</ul>
<p>Some of the benfits of kitty:</p>
<ul>
<li>
<p>Fully GPU/OpenGL rendering</p>
</li>
<li>
<p>Easy split/tabing</p>
</li>
<li>
<p>Configurable font. You can configure multiple fonts for display. e.g. my configure:</p>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>font_family      FiraCode Retina
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>italic_font      InconsolataLGC Nerd Font Italic
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>bold_font        FiraCode Semibold
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>bold_italic_font InconsolataLGC Nerd Font BoldItalic
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a># Font size (in pts)
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>font_size        16.0
</span></code></pre></div>
<p>Why am I doing this:</p>
<ul>
<li>
<p>bold font is too heavy&hellip; semibold is less distracting</p>
</li>
<li>
<p>Retina font is better than regular (I guess&hellip;)</p>
</li>
<li>
<p>nerd font support</p>
</li>
<li>
<p>Some font do not have italic (e.g. Cascadia)</p>
</li>
</ul>
<p>nvim+kitty split view:</p>
<p><img alt="vim_ide with nvim+kitty" src="https://raw.githubusercontent.com/ray-x/dotfiles/master/img/kitty.jpg" /></p>
<p><a href="https://github.com/ray-x/dotfiles">Check my repo</a></p>
    <nav class="md-post__action">
      <a href="../../2020/06/06/sharing-my-dotfilesvimkittyzsh-configuration/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-01 00:00:00">June 1, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="kafka-sasl-client-setup"><a class="toclink" href="../../2020/06/01/kafka-sasl-client-setup/">kafka SASL client setup</a></h2>
<hr />
<p>layout: post
title: &ldquo;connect to kafka cluster with SASL&rdquo;
subtitle: [&ldquo;GUI Tools Kafka setup&rdquo;, &ldquo;kafka 客户端SASL配置&rdquo;]
author: &ldquo;Ray&rdquo;
header-style: text
tags:
  - Docker</p>
<hr />
<p>I found there are two GUI client that can be used to connect to kafka:</p>
<h2 id="conductor"><a class="toclink" href="../../2020/06/01/kafka-sasl-client-setup/#conductor">Conductor</a></h2>
<p>I have been used this tool for a while, it do have a nice UI design and lots of features. But I need a professional
licence to use it to connect to kafka.
<img alt="Conductor UI" src="https://www.conduktor.io/uploads/screenshot-topics.png" /></p>
<h2 id="kafka-tool"><a class="toclink" href="../../2020/06/01/kafka-sasl-client-setup/#kafka-tool">Kafka Tool</a></h2>
<p>Kafka Tool also support SASL.
Please refer to the document here:
<a href="https://kafkatool.com/documentation/connecting.html">Kafka Tool SASL setup</a>
JAAS Setup <img alt="JAAS Setup" src="https://kafkatool.com/documentation/sshots/connecting_jaas_config.png" /></p>
<p>The JAAS connection string <code>sasl.jaas.config: org.apache.kafka.common.security.scram.ScramLoginModule required username="your name" password="you password";</code></p>
<h2 id="akhq-previously-known-as-kafkahq"><a class="toclink" href="../../2020/06/01/kafka-sasl-client-setup/#akhq-previously-known-as-kafkahq">AKHQ (previously known as KafkaHQ)</a></h2>
<p>Kafka GUI for Apache Kafka to manage topics, topics data, consumers group, schema registry, connect and more&hellip;
<a href="https://github.com/tchiotludo/akhq">Github</a></p>
<p><img alt="AKHQ" src="https://github.com/tchiotludo/akhq/raw/dev/docs/assets/images/video.gif" /></p>
<p>The simplest way to install the software is using docker <code>tchiotludo/akhq</code></p>
<p>You need to update the application.yml and  run</p>
<p><div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span>-v<span class="w"> </span>/tmp/application.yml:/app/application.yml<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span>tchiotludo/akhq
</span></code></pre></div>
Here is a example <a href="https://github.com/tchiotludo/akhq/blob/dev/application.example.yml">application.yml</a></p>
<p>To setup SASL
Need to chang bootstrap, security, sasl configure:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>akhq:
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  server:
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    base-path: &quot;&quot; # if behind a reverse proxy, path to akhq without trailing slash (optional). Example: akhq is
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>                  # behind a reverse proxy with url http://my-server/akhq, set base-path: &quot;/akhq&quot;.
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>                  # Not needed if you&#39;re behind a reverse proxy with subdomain http://akhq.my-server/
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    access-log: # Access log configuration (optional)
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>      enabled: true # true by default
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>      name: org.akhq.log.access # Logger name
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>      format: &quot;[Date: {}] [Duration: {} ms] [Url: {} {} {}] [Status: {}] [Ip: {}] [Length: {}] [Port: {}]&quot; # Logger format
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>  # default kafka properties for each clients, available for admin / producer / consumer (optional)
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>  clients-defaults:
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    consumer:
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>      properties:
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>        isolation.level: read_committed
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>  # list of kafka cluster available for akhq
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>  connections:
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    my-cluster-sasl:
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>      properties:
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>        bootstrap.servers: &quot;1.236.23.21:9092,3.15.1.12:9092,3.15.16.69:9092&quot;
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>        security.protocol: SASL_PLAINTEXT
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>        sasl.mechanism: PLAIN
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>        sasl.jaas.config: org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;your username&quot; password=&quot;your password&quot;;
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>  pagination:
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>    page-size: 25 # number of elements per page (default : 25)
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>    threads: 16 # Number of parallel threads to resolve page
</span></code></pre></div>
    <nav class="md-post__action">
      <a href="../../2020/06/01/kafka-sasl-client-setup/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-17 00:00:00">May 17, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="docker-network"><a class="toclink" href="../../2020/05/17/docker-network/">Docker network</a></h2>
<h3 id="name-space-in-linux"><a class="toclink" href="../../2020/05/17/docker-network/#name-space-in-linux">Name space in linux</a></h3>
<p>UTS (Hostname+DomainName), User, Mount, IPC, Pid, Net </p>
<p>In docker virtual network interface was used. Bridged network used to connect the containers</p>
<p>A good reference <a href="https://www.docker.com/blog/understanding-docker-networking-drivers-use-cases/">Understanding Docker Networking Drivers and their use cases</a></p>
<p>Docker network bridge
<img alt="Docker network bridge(From docker.com)" src="http://img.scoop.it/bmExZyvGWidultcwx9hCb7nTzqrqzN7Y9aBZTaXoQ8Q=" /></p>
<p>Connect to docker network
 <img alt="Docker network bridge(From docker.com)" src="https://docs.docker.com/engine/tutorials/bridge2.png" /></p>
<p>The connection between containers that inside different hosts could be through <strong>overlay network</strong>.</p>
<p>An diagram from docker-k8s-lab shows how overlay works
<img alt="docker overlay network" src="https://docker-k8s-lab.readthedocs.io/en/latest/_images/docker-overlay.png" /></p>
<h3 id="docker-networks"><a class="toclink" href="../../2020/05/17/docker-network/#docker-networks">Docker networks:</a></h3>
<ul>
<li>Bridge </li>
<li>alloc by default when contain starts, </li>
<li>network: docker0IP   172.17.0.1/16 IP address of your docker</li>
<li>use <code>brctl show</code> to check your connection(two busybox container run at the moment):
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>            bridge name     bridge id               STP enabled     interfaces
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>            docker0         8000.02429af16b57       no              veth317e9b3
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>                                                                    vetha74a241
</span></code></pre></div>
    docker0 connected to two interface base1, and base2. base1 can access base2
    e.g <code>wget  -q -O - 172.17.0.3</code>  (<code>-</code> means output to stdout)</li>
<li>host</li>
<li>access network from host. Share UTS/NET/IPC</li>
<li>none</li>
<li>NULL, only have loopback interface</li>
</ul>
<h4 id="a-slightly-complicated-docker-run-command"><a class="toclink" href="../../2020/05/17/docker-network/#a-slightly-complicated-docker-run-command">A slightly complicated <code>docker run</code> command</a></h4>
<p><code>docker run --name mydocker1 -it --network bridge -h mydocker1.rayx.me --dns 8.8.8.8 --dns-search rayx.me --add-host www.rayx.me:54.12.17.68 --rm busybox:latest</code>
Above command will create a docker named mydocker1 with bridge network.
The host name  mydocker1.rayx.me, use dns 8.8.8.8
in /etc/hosts will have :
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>54.12.17.68     www.rayx.me
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>172.17.0.4      mydocker1.rayx.me mydocker1
</span></code></pre></div>
So access to <a href="http://www.rayx.me">www.rayx.me</a> will use IP 54.12.17.68</p>
<h3 id="inbound-communications"><a class="toclink" href="../../2020/05/17/docker-network/#inbound-communications">Inbound communications</a></h3>
<p><code>docker [container] run -p</code> or <code>docker [container] run -P</code>
  * -P will expose all ports, -p will expose specific ports</p>
<ul>
<li>
<p>-p <containerPort> export container port to a host dynamic port (e.g 3001)
      e.g. 
      start the container
      <code>docker run --name busybox-web1 --rm -p 80  ray-x/httpd-busybox:v0.2</code></p>
<p>check dynamic port</p>
<p><code>sudo iptables -t nat -vnL</code></p>
<p>got:</p>
</li>
</ul>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="w">    </span>Chain<span class="w"> </span>DOCKER<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span>references<span class="o">)</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span>pkts<span class="w"> </span>bytes<span class="w"> </span>target<span class="w">     </span>prot<span class="w"> </span>opt<span class="w"> </span><span class="k">in</span><span class="w">     </span>out<span class="w">     </span><span class="nb">source</span><span class="w">               </span>destination<span class="w">         </span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">        </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w"> </span>RETURN<span class="w">     </span>all<span class="w">  </span>--<span class="w">  </span>docker0<span class="w"> </span>*<span class="w">       </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">0</span>.0.0.0/0<span class="w">           </span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">        </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w"> </span>DNAT<span class="w">       </span>tcp<span class="w">  </span>--<span class="w">  </span>!docker0<span class="w"> </span>*<span class="w">       </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">0</span>.0.0.0/0<span class="w">            </span>tcp<span class="w"> </span>dpt:32768<span class="w"> </span>to:172.17.0.5:80
</span></code></pre></div>
      The 80 port was mapped to 
      So you could access the web through <code>curl 127.0.0.1:32768</code>
      Or with <code>docker port</code>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="w">      </span>docker<span class="w"> </span>port<span class="w"> </span>7a96c7ddeb1e
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">      </span><span class="m">80</span>/tcp<span class="w"> </span>-&gt;<span class="w"> </span><span class="m">0</span>.0.0.0:32768
</span></code></pre></div>
  * -p <hostPort>:<containerPort> map containerPort to hostPort</p>
<div class="language-text highlight"><pre><span></span><code>e.g. `docker run --name busybox-web1 --rm -p 8080::80  ray-x/httpd-busybox:v0.2`
</code></pre></div>
<ul>
<li>
<p>-p <ip>::<containerPort> map containerPort to host <ip> dynamic port (e.g 192.168.0.2:8080)</p>
<p>e.g. <code>docker run --name busybox-web1 --rm -p 192.168.10.10::80  ray-x/httpd-busybox:v0.2</code>
All access to docker 80 will need to through 192.168.10.10 network + a dynamic port</p>
</li>
<li>
<p>-p <ip>::<hostPort>:<containerPort> map containerPort to host <ip> and port <hostPort></p>
</li>
</ul>
<p>e.g. <code>docker run --name busybox-web1 --rm -p 192.168.10.10:8080::80  ray-x/httpd-busybox:v0.2</code></p>
<h3 id="join-other-containers-network-share-uts-ipc-net"><a class="toclink" href="../../2020/05/17/docker-network/#join-other-containers-network-share-uts-ipc-net">join other container&rsquo;s network (share UTS, IPC, Net )</a></h3>
<p>start up container b1
<code>docker run --name b1 --rm  -it  busybox</code>
start up container b2 and join network of b1
<code>docker run --name b2 --rm  -it  --network container:b1 busybox</code> 
run <code>ifconfig</code> on both docker container and the ip address will be the same (in my test both are 172.17.0.2)
<em>b1</em> and <em>b2</em> share network and 127.0.0.1 in b1 is same as 127.0.0.1 in b2. e.g start a webserver in b1 and you can use 127.0.0.1:80 to access the http from b2</p>
<h3 id="host-network"><a class="toclink" href="../../2020/05/17/docker-network/#host-network">host network</a></h3>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>b2<span class="w"> </span>--rm<span class="w">  </span>-it<span class="w">  </span>--network<span class="w"> </span>host<span class="w"> </span>busybox
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>/<span class="w"> </span><span class="c1">#ifconfig</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>docker0<span class="w">   </span>Link<span class="w"> </span>encap:Ethernet<span class="w">  </span>HWaddr<span class="w"> </span><span class="m">02</span>:42:32:D3:57:27<span class="w">  </span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">          </span>inet<span class="w"> </span>addr:172.17.0.1<span class="w">  </span>Bcast:172.17.255.255<span class="w">  </span>Mask:255.255.0.0
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>......
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>enp1s0<span class="w">    </span>Link<span class="w"> </span>encap:Ethernet<span class="w">  </span>HWaddr<span class="w"> </span><span class="m">00</span>:25:22:26:4E:F8<span class="w">  </span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">          </span>inet<span class="w"> </span>addr:192.168.199.88<span class="w">  </span>Bcast:192.168.199.255<span class="w">  </span>Mask:255.255.255.0
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">          </span>inet6<span class="w"> </span>addr:<span class="w"> </span>fe80::225:22ff:fe26:4ef8/64<span class="w"> </span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">          </span>.....
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>lo<span class="w">        </span>Link<span class="w"> </span>encap:Local<span class="w"> </span>Loopback<span class="w">  </span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">          </span>inet<span class="w"> </span>addr:127.0.0.1<span class="w">  </span>Mask:255.0.0.0
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">          </span>inet6<span class="w"> </span>addr:<span class="w"> </span>::1/128<span class="w"> </span>Scope:Host
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">          </span>UP<span class="w"> </span>LOOPBACK<span class="w"> </span>RUNNING<span class="w">  </span>MTU:65536<span class="w">  </span>Metric:1
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">          </span>.....
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>veth62789e1<span class="w"> </span>Link<span class="w"> </span>encap:Ethernet<span class="w">  </span>HWaddr<span class="w"> </span><span class="m">22</span>:3A:F7:11:B3:92<span class="w">  </span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">          </span>inet6<span class="w"> </span>addr:<span class="w"> </span>fe80::203a:f7ff:fe11:b392/64<span class="w"> </span>Scope:Link
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">          </span>.....
</span></code></pre></div>
By adding <code>--network host</code> container can access the host network</p>
<h3 id="multiple-bridges-in-a-host"><a class="toclink" href="../../2020/05/17/docker-network/#multiple-bridges-in-a-host">Multiple bridges in a host</a></h3>
<p>We could use <code>docker network create</code> to create a new bridge(or host, lo, maclan, overlay etc)</p>
<p>e.g.
<code>docker network create -d bridge --subnet "172.26.0.0/16" --gateway "172.26.0.2" bridge1</code></p>
<p>Then we can attach container to the bridge1</p>
<p><code>docker run --name b2 --rm  -it  --net bridge1 busybox</code> </p>
    <nav class="md-post__action">
      <a href="../../2020/05/17/docker-network/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-16 00:00:00">May 16, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="create-a-docker-image"><a class="toclink" href="../../2020/05/16/create-a-docker-image/">Create a docker image</a></h2>
<h4 id="create-a-new-image-from-a-containers-changes"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#create-a-new-image-from-a-containers-changes">Create a new image from a container&rsquo;s changes</a></h4>
<ul>
<li>
<p>Usage:</p>
</li>
<li>
<p>Docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</p>
</li>
</ul>
<p>e.g: Get a busy box image and create a file inside container</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>docker run --name base1 -it busybox
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Unable to find image &#39;busybox:latest&#39; locally
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>latest: Pulling from library/busybox
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>d9cbbca60e5f: Pull complete
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>Digest: sha256:836945da1f3afe2cfff376d379852bbb82e0237cb2925d53a13f53d6e8a8c48c
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>Status: Downloaded newer image for busybox:latest
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>/ #mkdir -p /data/html
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>vi index.html
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>&lt;h1&gt;Busybox httpd server. &lt;/h1&gt;
</span></code></pre></div>
<p>In another terminal create a new image and check it</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>docker commit -p  -a &quot;rayx1&quot; -m &quot;a base image with index.html&quot; base1
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>docker image ls
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>&lt;none&gt;              &lt;none&gt;              64e381aeac90        55 seconds ago       1.22MB
</span></code></pre></div>
<p>you will see a un-named image. To tag a image use <code>docker tag</code></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Usage:  docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
</span></code></pre></div>
<p>e.g tag it to user rayx1 with name httpd-busybox and tag v0.1</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>docker tag 64e381aeac90 rayx1/httpd-busybox:v0.1
</span></code></pre></div>
<p>Also you could use multiple tags</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>docker tag rayx1/httpd-busybox:v0.1 rayx1/httpd:latest
</span></code></pre></div>
<p>You will see:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>rayx1/httpd-busybox   v0.1                64e381aeac90        6 minutes ago       1.22MB
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>rayx1/httpd           latest              64e381aeac90        6 minutes ago       1.22MB
</span></code></pre></div>
<p>You could remove a tag with image rm</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>docker image rm rayx1/httpd
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>Untagged: rayx1/httpd:latest
</span></code></pre></div>
<p>You can change docker file fields</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>docker inspect base1
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>[
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    {
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>        ...
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>        &quot;Config&quot;: {
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>            ...
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>            &quot;Cmd&quot;: [
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>                &quot;sh&quot;
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>            ],
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>            ...
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>        },
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>    }
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>]
</span></code></pre></div>
<p>Create a new image with Cmd start a httpd with version v0.2</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>docker commit -a &quot;rayx1 &lt;ray@myemail.com&gt;&quot; -c &#39;CMD [&quot;/bin/httpd&quot;, &quot;-f&quot;, &quot;-h&quot;, &quot;/data/html&quot;]&#39; -p base1 rayx1/httpd-busybox:v0.2
</span></code></pre></div>
<h4 id="run-the-new-image"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#run-the-new-image">Run the new image</a></h4>
<p>docker run : Run a command in a <strong>new</strong> container</p>
<p><code>docker run --name base2 rayx1/httpd-busybox:v0.2</code> Use <code>docker inspect base2</code> get the ipaddress
<code>"IPAddress": "172.17.0.3",</code> and you can check the http with <code>lynx 172.17.0.3</code></p>
<h4 id="startstoprestart"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#startstoprestart">start/stop/restart</a></h4>
<p><code>docker start|stop|restart [OPTIONS] CONTAINER [CONTAINER...]</code> Options:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>Options:
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>  -a, --attach               Attach STDOUT/STDERR and forward signals
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>      --detach-keys string   Override the key sequence for detaching a container
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>  -i, --interactive          Attach container&#39;s STDIN
</span></code></pre></div>
<p>Note: You can not re-run a container image again. You have to start/stop/restart your container. <code>container run</code> only
can be used for start a <strong>new</strong> container</p>
<h4 id="login-into-docker-hub-and-push-the-image"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#login-into-docker-hub-and-push-the-image">login into docker hub and push the image</a></h4>
<p><code>docker login -u rayx1</code> <code>docker push rayx1/httpd-busybox</code></p>
<p>note you can also login into other docker image registry. e.g to login into aliyun docker
<code>docker login -u rayx1 registry.cn-beijing.aliyuncs.com</code> and push
<code>docker push registry.cn-beijing.aliyuncs.com/rayx1/httpd-busybox:v0.2</code></p>
<h4 id="export-and-import-saveload-your-local-docker-image-without-push-to-server"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#export-and-import-saveload-your-local-docker-image-without-push-to-server">Export and import (save/load) your local docker image (without push to server)</a></h4>
<p>If you&rsquo;d like to distribute your images to your teammate without push to a server (maybe, for testing purpose)</p>
<h5 id="export"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#export">Export</a></h5>
<p><code>docker save [OPTIONS] IMAGE [IMAGE...]</code> e.g pack http-busybox into httpd.<strong>gz</strong>
<code>docker save -o httpd.gz rayx1/httpd-busybox:v0.2</code> or multiple image into a file
<code>docker save -o httpd.gz rayx1/httpd-busybox:v0.2 rayx1/busybox</code></p>
<h5 id="import"><a class="toclink" href="../../2020/05/16/create-a-docker-image/#import">import</a></h5>
<p><code>docker load -i httpd.gz</code></p>
    <nav class="md-post__action">
      <a href="../../2020/05/16/create-a-docker-image/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-14 00:00:00">May 14, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="what-is-kubernetes"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/">What is Kubernetes?</a></h2>
<p>Kubernetes, AkA k8s.Kubernetes, is an Production-Grade Container Orchestration System. It can automating deployment, scaling, and managing containerized applications. </p>
<h2 id="what-kubernetes-can-do"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#what-kubernetes-can-do">What Kubernetes can do?</a></h2>
<ul>
<li>Service discovery and load balancing</li>
<li>Storage orchestration (automatically mount a storage system)</li>
<li>Automated rollouts and rollbacks</li>
<li>Automatic bin packing</li>
<li>Self-healing</li>
<li>Secret and configuration management</li>
<li>etc</li>
</ul>
<h2 id="kubernetes-clusters"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#kubernetes-clusters">Kubernetes Clusters</a></h2>
<p><img alt="K8S Architecture" src="https://miro.medium.com/max/1276/1*56l6-yNIXFaNZgofRqPAkA.jpeg" /></p>
<p>Master node:</p>
<p>API will access k8s master and k8s will route the request to node.</p>
<p><img alt="Kubernetes cluster with all the components tied together." src="https://d33wubrfki0l68.cloudfront.net/7016517375d10c702489167e704dcb99e570df85/7bb53/images/docs/components-of-kubernetes.png" />)</p>
<h3 id="api-server"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#api-server">API Server</a></h3>
<p>kube-apiserver is a component of the Kubernetes control plane that exposes the Kubernetes API. </p>
<h3 id="scheduler"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#scheduler">Scheduler</a></h3>
<p>kube-scheduler control plane component that watches for newly created Pods with no assigned node, and selects a node for them to run on.</p>
<h3 id="controller-and-kube-controller-manager"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#controller-and-kube-controller-manager">controller and kube-controller-manager</a></h3>
<ul>
<li>controller: Control loops that watch the state of your cluster, then make or request changes where needed. Each controller tries to move the current cluster state closer to the desired state.</li>
<li>Node controller: Monitor nodes. Noticing and responding when nodes go down.</li>
<li>Endpoints controller: Populates the Endpoints object</li>
<li>Replication controller: Responsible for maintaining the correct number of pods for every replication controller object in the system.</li>
<li>Service Account &amp; Token controllers: Create default accounts and API access tokens for new namespaces.</li>
</ul>
<h3 id="pod-and-nodes"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#pod-and-nodes">POD And Nodes</a></h3>
<h4 id="pod"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#pod">Pod</a></h4>
<p>Kubernetes created a Pod to host your application instance. A Pod is a Kubernetes abstraction that represents a <strong>group of one or more application containers</strong> (such as Docker or rkt), and some shared resources for those containers. Those resources include:</p>
<ul>
<li>Shared storage, as Volumes</li>
<li>Networking, as a unique cluster IP address</li>
<li>Information about how to run each container, such as the container image version or specific ports to use
  Pod is a virtual machine to host docker containers/applications
  Pods overview <img alt="Pods overview" src="https://d33wubrfki0l68.cloudfront.net/fe03f68d8ede9815184852ca2a4fd30325e5d15a/98064/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg" /></li>
</ul>
<p>Normally, we group containers that logically coupled together in a Pod. But in most case we run a single container in a Pod.</p>
<h4 id="node"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#node">Node</a></h4>
<p>A Node is a machine that host Pods.
  <img alt="Node overview" src="https://d33wubrfki0l68.cloudfront.net/5cb72d407cbe2755e581b6de757e0d81760d5b86/a9df9/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg" />
  Node can be either virtual machine or physical machine.
  Node is consisted with :
  * kubelet
  * kube-proxy
  * Pods
    * docker(or other container)</p>
<h4 id="kube-cluster"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#kube-cluster">kube-cluster</a></h4>
<p>A cluster of Nodes</p>
<h4 id="labels-and-selectors"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#labels-and-selectors">Labels and Selectors</a></h4>
<p>Labels are key/value pairs that are attached to objects, such as pods.
<code>key=value</code>
selector: used to filter pods</p>
<h4 id="pod-management"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#pod-management">Pod management</a></h4>
<h5 id="replicationcontroller"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#replicationcontroller">ReplicationController</a></h5>
<p>Manage and maintain number of Replica of Pod. (Scale up and down )</p>
<h5 id="replica-set"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#replica-set">Replica Set</a></h5>
<p>Manage and maintain number of Replica of Pod. (Scale up and down )</p>
<h5 id="deployments"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#deployments">Deployments</a></h5>
<p>Provides declarative updates for Pods and ReplicaSets.</p>
<h5 id="statefulsets"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#statefulsets">StatefulSets</a></h5>
<p>Workload API object used to manage stateful applications.</p>
<h5 id="deamonset"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#deamonset">DeamonSet</a></h5>
<p>ensures that all (or some) Nodes run a copy of a Pod. </p>
<h5 id="job"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#job">Job</a></h5>
<p>A Job creates one or more Pods and ensures that a specified number of them successfully terminate. </p>
<h5 id="cronjob"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#cronjob">Cronjob</a></h5>
<p>Creates Jobs on a repeating schedule.</p>
<h5 id="hpa-horizontal-pod-autoscaler"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#hpa-horizontal-pod-autoscaler">HPA  (Horizontal Pod Autoscaler)</a></h5>
<p>Horizontal Pod Autoscaler automatically scales the number of pods in a replication controller, deployment, replica set or stateful set based on observed CPU utilization or, metrics. </p>
<h2 id="_1"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#_1"></a></h2>
<h4 id="service"><a class="toclink" href="../../2020/05/14/kubernetes-introduction/#service">Service</a></h4>
<p>An abstract way to expose an application running on a set of Pods as a network service.</p>
    <nav class="md-post__action">
      <a href="../../2020/05/14/kubernetes-introduction/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-13 00:00:00">May 13, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="limit-container-resources"><a class="toclink" href="../../2020/05/13/limit-container-resources/">Limit container resources</a></h2>
<p>By default, a container has no resource constrains and an use as much of resource as kernel scheduler allows. </p>
<p>We can restraint CPU, Memory and GPU usage for docker</p>
<h3 id="memory-and-oom"><a class="toclink" href="../../2020/05/13/limit-container-resources/#memory-and-oom">Memory and OOM</a></h3>
<p>On Linux hosts, if the kernel detects that there is not enough memory to perform important system functions, it throws an OOME, or Out Of Memory Exception, and starts killing processes to free up memory. (Most likely a Java application :-P)
Docker attempts to mitigate these risks by adjusting the OOM priority on the Docker daemon so that it is less likely to be killed than other processes on the system. </p>
<p><code>-oom-score-adj</code> to adjust the priority 
<code>--oom-kill-disable</code>
* -m or &ndash;memory=   e.g. -m 32m
* &ndash;memory-swap  The amount of memory this container is allowed to swap to disk.  </p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>&ndash;memroy-swap</td>
<td>-m</td>
<td>explain</td>
</tr>
<tr>
<td>passive S</td>
<td>passive M</td>
<td>Container total space S, RAM: M, swap S-M, if S==M, no SWAP allocated</td>
</tr>
<tr>
<td>0</td>
<td>positive</td>
<td>swap unset (same as below)</td>
</tr>
<tr>
<td>unset</td>
<td>positive M</td>
<td>if swap enabled in host , total swap 2*M</td>
</tr>
<tr>
<td>-1</td>
<td>positive M</td>
<td>if Host enabled swap, container can use up all swap space</td>
</tr>
</tbody>
</table>
<h3 id="cpu"><a class="toclink" href="../../2020/05/13/limit-container-resources/#cpu">CPU</a></h3>
<p>&ndash;cpus   how may cpus can be used 0.5 half of a CPU, 1.5 one and a half CPU</p>
<p>e.g 
<div class="language-Bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--cpus<span class="o">=</span><span class="s2">&quot;.5&quot;</span><span class="w"> </span>ubuntu<span class="w"> </span>/bin/bash
</span></code></pre></div></p>
    <nav class="md-post__action">
      <a href="../../2020/05/13/limit-container-resources/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-12 00:00:00">May 12, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="build-private-docker-registry"><a class="toclink" href="../../2020/05/12/build-private-docker-registry/">Build private docker registry</a></h2>
<p>If you do not want publish your docker to public registry(e.g. dockerhub, aws, aliyun etc). You can use a local/private registry.
Docker provide docker registry(which is is a docker image)</p>
<p>A good reference by digital ocean <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-private-docker-registry-on-ubuntu-18-04">how to set up a private  docker reigstry on ubuntu 18.04</a>
And <a href="https://docs.docker.com/registry/deploying/">Deploy a registry server</a></p>
<h3 id="publish-image-to-private-registry"><a class="toclink" href="../../2020/05/12/build-private-docker-registry/#publish-image-to-private-registry">Publish image to private registry</a></h3>
<p>Note: need a https server, or 
add <code>"insecure-registries":[true]</code>
in /etc/docker/demon.json</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>docker<span class="w"> </span>tag<span class="w"> </span>mydocker:v0.1-11<span class="w"> </span>private.docker.domain.name.com:5000/mydocker:v0.3-11
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>docker<span class="w"> </span>push<span class="w"> </span>private.docker.domain.name.com:5000/mydocker:v0.3-11
</span></code></pre></div>
<h2 id="_1"><a class="toclink" href="../../2020/05/12/build-private-docker-registry/#_1"></a></h2>
<h3 id="harbor"><a class="toclink" href="../../2020/05/12/build-private-docker-registry/#harbor">Harbor</a></h3>
<p>Trusted cloud native repository for Kubernetes
Installation:
[How To Install Harbor Docker Image Registry on CentOS / Debian / Ubuntu] (<a href="https://sxi.io/how-to-install-harbor-docker-image-registry-on-centos-debian-ubuntu/">https://sxi.io/how-to-install-harbor-docker-image-registry-on-centos-debian-ubuntu/</a>)</p>
<p><img alt="Harbor login" src="https://sxi.io/wp-content/uploads/2019/09/img_5d909b9c725c6.png" /></p>
<p><img alt="Harbor projects" src="https://sxi.io/wp-content/uploads/2019/09/img_5d909b9f87ea4.png" /></p>
    <nav class="md-post__action">
      <a href="../../2020/05/12/build-private-docker-registry/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-10 00:00:00">May 10, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="dockerfile"><a class="toclink" href="../../2020/05/10/dockerfile/">Dockerfile</a></h2>
<p>We can use 
* storage volume
* <code>docker exec</code>, 
* ansible (and similer software) 
* <code>docker run</code> with options, 
* container based on container
* etc</p>
<p>to build a customized a docker. But with dockerfile it is easy to build a customized docker.</p>
<h3 id="share-system-variable"><a class="toclink" href="../../2020/05/10/dockerfile/#share-system-variable">Share system variable</a></h3>
<p>As discussed early, we can use a infrastructure container to share system variable to other container. (e.g use consul)
and generate configure file based on system variable. e.g. a nginx file in /etc/nginx/conf.d/
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># server.config
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>{
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  server_name $MY_NGX_SERVER_NAME;
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  listen $NGX_IP:$NGX_PORT;
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  root $WEB_ROOT;
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>}
</span></code></pre></div></p>
<h3 id="dockerfile_1"><a class="toclink" href="../../2020/05/10/dockerfile/#dockerfile_1">Dockerfile</a></h3>
<ul>
<li>Source code for building Docker images. It contains all the comnands to assemble a image</li>
<li>Use docker build to access dockerfile</li>
</ul>
<h2 id="_1"><a class="toclink" href="../../2020/05/10/dockerfile/#_1"></a></h2>
<h4 id="dockerfile-format"><a class="toclink" href="../../2020/05/10/dockerfile/#dockerfile-format">Dockerfile format</a></h4>
<ul>
<li><code># Comment</code></li>
<li>INSTRUCTION arguments<ul>
<li>Instruction is <strong>NOT</strong> casesensitive, but it is a convention to use UPPERCASE to distinguish them from arguments more easily</li>
</ul>
</li>
<li>Docker runs instructions in a Dockerfile in order</li>
<li>The first instruction must be <code>FROM</code> in order to specify the Base Docker Image from which your are building.</li>
</ul>
<h4 id="docker-ignore-file-dockerignore"><a class="toclink" href="../../2020/05/10/dockerfile/#docker-ignore-file-dockerignore">Docker ignore file  .dockerignore</a></h4>
<p>Same as .gitignore</p>
<h4 id="environment-variable-and-replacement"><a class="toclink" href="../../2020/05/10/dockerfile/#environment-variable-and-replacement">Environment variable and replacement</a></h4>
<ul>
<li>env variable (declared with <strong>ENV</strong> statement) can also be used in instructions as variables to be interpreted by Dockerfile</li>
<li>Env variable are notated in Dockerfile with $variable_name or ${variable_name}</li>
<li>${variable_name} support bash modifiers</li>
<li>${var:-word} if var is set, return var value, otherwise return word</li>
<li>${var:+word} if var is set, return word value, otherwise return empty</li>
</ul>
<h3 id="_2"><a class="toclink" href="../../2020/05/10/dockerfile/#_2"></a></h3>
<h3 id="dockerfile-instructions"><a class="toclink" href="../../2020/05/10/dockerfile/#dockerfile-instructions">Dockerfile instructions</a></h3>
<h4 id="from"><a class="toclink" href="../../2020/05/10/dockerfile/#from">FROM</a></h4>
<ul>
<li>Need to be first un-comment statement.</li>
<li>Base image can be either local image or docker registry (e.g docker hub)</li>
<li>Syntax (either)<ul>
<li>FROM \<repository>[:<tag>] (repository is image name e.g nginx, redis, or ray-x/busybox-httpd)</li>
<li>FROM \<repository>@\<digest-hash> 
e.g.
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">busybox:latest</span>
</span></code></pre></div></li>
</ul>
</li>
</ul>
<h2 id="_3"><a class="toclink" href="../../2020/05/10/dockerfile/#_3"></a></h2>
<h4 id="maintainer-depreacted"><a class="toclink" href="../../2020/05/10/dockerfile/#maintainer-depreacted">MAINTAINER (depreacted)</a></h4>
<p>e.g <code>MAINTAINER "rayxu &lt;rayx@rayx.me&gt;"</code></p>
<h2 id="_4"><a class="toclink" href="../../2020/05/10/dockerfile/#_4"></a></h2>
<h4 id="labels"><a class="toclink" href="../../2020/05/10/dockerfile/#labels">LABELS</a></h4>
<ul>
<li>Usage: <code>LABEL &lt;key&gt;=&lt;value&gt; [&lt;key&gt;=&lt;value&gt; ...]</code></li>
<li>The LABEL instruction adds metadata to an image in format of key=value e.g  <code>MAINTAINER="rayxu &lt;rayx@rayx.me&gt;"</code></li>
</ul>
<h2 id="_5"><a class="toclink" href="../../2020/05/10/dockerfile/#_5"></a></h2>
<h4 id="copy"><a class="toclink" href="../../2020/05/10/dockerfile/#copy">COPY</a></h4>
<ul>
<li>Syntax:<ul>
<li>COPY \<src> [\<src> &hellip;] \<dest></li>
<li>COPY [&ldquo;\<src>&ldquo;, &hellip; &ldquo;\<dest>&ldquo;]</li>
</ul>
</li>
<li>Copies new files or directories from <src> and adds them to the filesystem of the image at the path \<dest>.</li>
<li>\<src> may contain wildcards and matching will be done using Go’s filepath.Match rules.</li>
<li>\<dest> is an absolute path, or a path relative to WORKDIR.</li>
<li>If \<dest> doesn’t exist, it is created along with all missing directories in its path.</li>
<li>If space existed in \<src> use &ldquo;<src>&rdquo; e.g. &ldquo;my src folder&rdquo;</li>
</ul>
<h2 id="_6"><a class="toclink" href="../../2020/05/10/dockerfile/#_6"></a></h2>
<h4 id="add"><a class="toclink" href="../../2020/05/10/dockerfile/#add">ADD</a></h4>
<p>ADD is similar to COPY, expects that it can add and unzip compressed file (gz, Z, bz2, zip). It also can fetch files from URL e.g. <code>ADD http://nginx.org/download/nginx-1.18.0.tar.gz /usr/local/</code>
  or <code>nginx-1.18.0.tar.gz /usr/local</code> (will untar to /usr/local, docker will have /usr/local/nginx-1.18.0)
  * Syntax:
    *  ADD \<src> [\<src> &hellip;] \<dest>
    *  ADD [&ldquo;\<src>&ldquo;, &hellip; &ldquo;\<dest>&ldquo;]
  * Same as COPY 1~5 bullet points
  * to un-compress, \<dest> must not end with <strong>/</strong>
  * If use <code>ADD ["&lt;src&gt;", ... "&lt;dest&gt;"]</code> and wildcard existed in src, \<dest> should end with <code>/</code> if \<dest> not end with <code>/</code> it will be treat as a single file instead of a dir </p>
<h2 id="_7"><a class="toclink" href="../../2020/05/10/dockerfile/#_7"></a></h2>
<h4 id="workdir"><a class="toclink" href="../../2020/05/10/dockerfile/#workdir">WORKDIR</a></h4>
<p>The WORKDIR instruction sets the working directory for any RUN, CMD, ENTRYPOINT, COPY and ADD instructions that follow it in the Dockerfile. If the WORKDIR doesn’t exist, it will be created even if it’s not used in any subsequent Dockerfile instruction.
  * Syntax:
    *  WORKDIR /path/to/workdir</p>
<ul>
<li>WORKDIR can be used multiple time 
    <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/usr</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">pwd</span><span class="w">  </span>#output<span class="w"> </span>/usr
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/bin   </span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">pwd</span><span class="w"> </span>#<span class="w"> </span>output<span class="w"> </span>/bin
</span></code></pre></div></li>
<li>WORKDIR instruction can resolve environment variables 
    <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">ENV</span><span class="w"> </span>DIRPATH<span class="w"> </span>/path
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">$DIRPATH/$DIRNAME</span>
</span></code></pre></div></li>
</ul>
<h2 id="_8"><a class="toclink" href="../../2020/05/10/dockerfile/#_8"></a></h2>
<h4 id="volume"><a class="toclink" href="../../2020/05/10/dockerfile/#volume">VOLUME</a></h4>
<p>The VOLUME instruction creates a mount point(volume) and marks it as holding externally mounted volumes from native host or other containers. 
* Syntax:
    *  VOLUME \<mountpoint>  e.g. VOLUME /var/log
    *  VOLUME [&ldquo;\<mountpoint>&ldquo;]  e.g. VOLUME [&ldquo;/opt&rdquo;]
*  VOLUME is used to share folder between Docker and host/other dockers
*  Docker VOLUME is similar to <code>-v</code> option in <code>docker run</code> command. Difference is that VOLUME does not specify the directory mapping. Normally is uses to gether the logs in container. More specific, VOLUME /var/log will expose the folder to a folder like <code>/var/lib/docker/volumes/3207....84e4</code> and docker container will know the mapping. Any logs in /var/log in docker will also appear in <code>/var/lib/docker/volumes/3207....84e4</code></p>
<h2 id="_9"><a class="toclink" href="../../2020/05/10/dockerfile/#_9"></a></h2>
<h4 id="expose"><a class="toclink" href="../../2020/05/10/dockerfile/#expose">EXPOSE</a></h4>
<p>Specify the port/protocol container listens on at runtime. 
* Syntax:
EXPOSE \<port> [\<port>/\<protocol>&hellip;]
* e.g</p>
<p><code>EXPOSE 11211/upp 11211/tcp 2 323/tcp</code>
  <code>EXPOSE 80</code> (default tcp)
  Check the port with <code>docker port image-name</code></p>
<h2 id="_10"><a class="toclink" href="../../2020/05/10/dockerfile/#_10"></a></h2>
<h4 id="env"><a class="toclink" href="../../2020/05/10/dockerfile/#env">ENV</a></h4>
<p>ENV sets the environment variable \<key> to the value \<value>.
Note ENV is set in <code>docker build</code> also it will be passed to <code>docker run</code>
The ENV setup can be overwrite with <code>docker run -e &lt;key&gt;=&lt;value&gt;</code>
* Syntax:
ENV \<key> \<value>
ENV \<key>=\<value> &hellip;</p>
<ul>
<li>Refer to the env variable with $variable_name or ${variable_name}</li>
<li>e.g 
  <code>ENV myName John Doe</code> equal to <code>ENV myName="John Doe"</code></li>
</ul>
<p><code>ENV myName="John Doe" myDog=Rex\ The\ Dog \
    myCat=fluffy</code>
* To set a value for a single command, use RUN \<key>=\<value> \<command></p>
<h2 id="_11"><a class="toclink" href="../../2020/05/10/dockerfile/#_11"></a></h2>
<h4 id="run"><a class="toclink" href="../../2020/05/10/dockerfile/#run">RUN</a></h4>
<p>Run the executable in docke durning docker build.
The RUN instruction will execute any commands in a new layer on top of the current image and commit the results. The resulting committed image will be used for the next step in the Dockerfile.</p>
<ul>
<li>Syntax</li>
<li>RUN \<command> (shell form, /bin/sh -c \<cmd>)</li>
<li>RUN  [&ldquo;executable&rdquo;, &ldquo;param1&rdquo;, &ldquo;param2&rdquo;] (exec form)</li>
<li>Shell form PID not 1 and can not receive Unix signals</li>
<li>Usage
  <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">ADD</span><span class="w"> </span>http://nginx.org/download/nginx-1.18.0.tar.gz<span class="w"> </span>/usr/local/src
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/usr/local/src<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>tar<span class="w"> </span>xf<span class="w"> </span>nginx-1.18.0.tar.gz
</span></code></pre></div></li>
<li>exec form does not support shell operator (e.g wildcard, &amp;, &gt;, | etc) to use shell , you need to run <code>RUN ["/bin/bash", "-c", "&lt;command&gt;", "&lt;argument1&gt;", "&lt;argument2&gt;" ... ]</code></li>
<li></li>
</ul>
<h2 id="_12"><a class="toclink" href="../../2020/05/10/dockerfile/#_12"></a></h2>
<h4 id="nohub-exec"><a class="toclink" href="../../2020/05/10/dockerfile/#nohub-exec">nohub, exec</a></h4>
<p>Tp prevent demon stop after shell stops, need to use 
nohub or exec.</p>
<p>Note:
nohub command
exec: replaces the current process image with a new process image. This means it replace 
nohub: no hungup, Run a Command or Shell-Script Even after You Logout</p>
<h4 id="cmd"><a class="toclink" href="../../2020/05/10/dockerfile/#cmd">CMD</a></h4>
<p>The main purpose of a CMD is to provide defaults for an executing container. e.g. buxybox default CMD is /usr/sh, nginx default is nginx 
* Syntax
  * CMD [&ldquo;executable&rdquo;,&rdquo;param1&rdquo;,&rdquo;param2&rdquo;] (exec form, this is the preferred form)
  * CMD [&ldquo;param1&rdquo;,&rdquo;param2&rdquo;] (as default parameters to ENTRYPOINT)
  * CMD command param1 param2 (shell form)
  * If multipule CMD provided, only the last one is effective
  * To build a busybox httpd, which is correct:
* Pitfull
    * CMD /bin/httpd -f -h <span WEB_ROOT="WEB_ROOT" class="arithmatex">\({WEB_ROOT}
    * CMD ["/bin/httpd", "-f", "-h", "\)</span>&rdquo;]
    * CMD [&ldquo;/bin/sh&rdquo;, &ldquo;-c&rdquo;, &ldquo;/bin/httpd&rdquo;, &ldquo;-f&rdquo;, &ldquo;-h ${WEB_ROOT}&rdquo;]
    * CMD [&ldquo;/bin/sh&rdquo;, &ldquo;-c&rdquo;, &ldquo;/bin/httpd&rdquo;, &ldquo;-f&rdquo;, &ldquo;-h /opt/data/web&rdquo;]
  * form 1, you can not enter interative mode with -it, If you need to inspect, need to run `docker exec &lsquo;/bin/sh&rsquo;
  * form 2, will not work, ${WEB_ROOT} not found 
  * form 3, will not work, start and then exit(httpd is a backend deamon sh -c httpd will return so PID 1 will exit too, this will stop the container)
  * form 4, will not work, start and then exit(same as above)</p>
<h2 id="_13"><a class="toclink" href="../../2020/05/10/dockerfile/#_13"></a></h2>
<h4 id="entrypoint"><a class="toclink" href="../../2020/05/10/dockerfile/#entrypoint">ENTRYPOINT</a></h4>
<p>An ENTRYPOINT allows you to configure a container that will run as an executable.
* Syntax
  * ENTRYPOINT [&ldquo;executable&rdquo;, &ldquo;param1&rdquo;, &ldquo;param2&rdquo;] (exec form)
  * ENTRYPOINT command param1 param2
* Command line arguments to docker run \<image> will be appended after all elements in an exec form ENTRYPOINT, and will override all elements specified using CMD. This allows arguments to be passed to the entry point, i.e., docker run \<image> -d will pass the -d argument to the entry point. You can override the ENTRYPOINT instruction using the docker run &ndash;entrypoint flag.
* The shell form prevents any CMD or run command line arguments from being used, but has the disadvantage that your ENTRYPOINT will be started as a subcommand of /bin/sh -c, which does not pass signals. This means that the executable will not be the container’s PID 1 - and will not receive Unix signals - so your executable will not receive a SIGTERM from docker stop \<container>.</p>
<ul>
<li>Only the last ENTRYPOINT instruction in the Dockerfile will have an effect.</li>
<li><code>docker run --entrypoint &lt;cmd&gt; &lt;args&gt;</code> overwrite the ENTRYPOINT in dockerfile</li>
<li>ENTRYPOINT solve the issue that <code>CMD ["/bin/sh", "-c", "/bin/httpd", "-f", "-h /opt/data/web"]</code> has
<code>ENTRYPOINT /bin/httpd -f =h /opt/data/web</code> will not exit</li>
<li>If both CMD and ENTRYPOINT exists, arguments of CMD will be pass to ENTRYPOINT as argument
  <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>CMD<span class="o">[</span><span class="s2">&quot;/bin/httpd&quot;</span>,<span class="w"> </span><span class="s2">&quot;-f&quot;</span>,<span class="w"> </span><span class="s2">&quot;-h&quot;</span>,<span class="w"> </span><span class="s2">&quot;/opt/data/web&quot;</span><span class="o">]</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">ENTRYPOINT</span><span class="w"> </span>/bin/sh<span class="w"> </span>-c
</span></code></pre></div>
  is eqal to 
  <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">ENTRYPOINT</span><span class="w"> </span>/bin/sh<span class="w"> </span>-c<span class="w"> </span>/bin/sh<span class="w"> </span>-c<span class="w"> </span>/bin/httpd<span class="w"> </span>-f<span class="w"> </span>-h<span class="w"> </span>/opt/data/web
</span></code></pre></div>
  <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>CMD<span class="o">[</span><span class="s2">&quot;/bin/httpd&quot;</span>,<span class="w"> </span><span class="s2">&quot;-f&quot;</span>,<span class="w"> </span><span class="s2">&quot;-h&quot;</span>,<span class="w"> </span><span class="s2">&quot;/opt/data/web&quot;</span><span class="o">]</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/bin/sh&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">]</span>
</span></code></pre></div>
  is eqal to 
  <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">ENTRYPOINT</span><span class="w"> </span>/bin/sh<span class="w"> </span>-c<span class="w"> </span>/bin/httpd<span class="w"> </span>-f<span class="w"> </span>-h<span class="w"> </span>/opt/data/web
</span></code></pre></div>
if you run <code>docker run --name bbxhttpd -it -P bbxhttpd:v0.1 "ls /opt"</code></li>
</ul>
<p>&ldquo;ls /opt&rdquo; will overwrite <code>CMD["/bin/httpd", "-f", "-h", "/opt/data/web"]</code> </p>
<ul>
<li>Use ENTRYPOINT to set ENV var and start deamon</li>
</ul>
<p>file: entrypoint.sh
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="ch">#!/bin/sh</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>cat<span class="w"> </span>&gt;<span class="w">  </span>/etc/nginx/conf.d/www.conf<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="s">server {</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="s">  server_name ${HOSTNAME};</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="s">   listen${IP:-0.0.0.0}:${PORT:-80}</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="s">  root ${NGX_DOC_ROOT:-/usr/share/nginx/html}</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="s">}</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="s">EOF</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="nb">exec</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="w">   </span><span class="c1"># PID=1</span>
</span></code></pre></div></p>
<p>file Dockerfile
  <div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">nginx:1.18-alpine</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">ENV</span><span class="w"> </span><span class="nv">NGX_ROOT</span><span class="o">=</span><span class="s2">&quot;/usr/data/html&quot;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">ADD</span><span class="w"> </span>index.html<span class="w"> </span><span class="si">${</span><span class="nv">NGX_ROOT</span><span class="si">}</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">ADD</span><span class="w"> </span>entrypoint.sh<span class="w"> </span>/bin/
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/usr/sbin/nginx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-g&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;daemon off;&quot;</span><span class="p">]</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/bin/entrypoint.sh&quot;</span><span class="p">]</span>
</span></code></pre></div></p>
<p>Run:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>nginx_demo:v0.1<span class="w"> </span>./
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>ngx1<span class="w"> </span>--rm<span class="w"> </span>-P<span class="w"> </span>nginx_demo:v0.1
</span></code></pre></div>
  login into docker
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ngx1<span class="w"> </span>/bin/sh
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1"># ps</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>PID<span class="w">  </span>USER<span class="w">  </span>TIME<span class="w">  </span>COMMAND
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="m">1</span><span class="w">    </span>ROOT<span class="w">  </span><span class="m">0</span>:00<span class="w">  </span>nginx:<span class="w"> </span>master<span class="w"> </span>proccess<span class="w"> </span>/usr/bin/nginx<span class="w"> </span>-g<span class="w"> </span>daemon<span class="w"> </span>off<span class="p">;</span><span class="w"> </span>
</span></code></pre></div></p>
<p>You will see nginx started and use ROOT user. That is not good for security reason</p>
<p>#
  ### USER
  User name for RUN, CMD, ENTRYPOINT
  * Syntax
    * USER \<UID>[:\<GID>]
    * USER \<user>[:\<group>]
  * check /etc/passwd for \<UID> </p>
<h2 id="_14"><a class="toclink" href="../../2020/05/10/dockerfile/#_14"></a></h2>
<h4 id="healthcheck"><a class="toclink" href="../../2020/05/10/dockerfile/#healthcheck">HEALTHCHECK</a></h4>
<p>The HEALTHCHECK instruction tells Docker how to test a container to check that it is still working. (e.g. not responding, infinite loop)
Syntax
* HEALTHCHECK [OPTIONS] CMD command  (check container health by running a command inside the container)
  * The options that can appear before CMD are:
    * &ndash;interval=DURATION (default: 30s)
    * &ndash;timeout=DURATION (default: 30s)
    * &ndash;start-period=DURATION (default: 0s)
    * &ndash;retries=N (default: 3)
  * Response:
    * 0: success - the container is healthy and ready for use
    * 1: unhealthy - the container is not working correctly
    * 2: reserved - do not use this exit code
* HEALTHCHECK NONE (disable any healthcheck inherited from the base image)
example:
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">HEALTHCHECK</span><span class="w"> </span>--interval<span class="o">=</span>5m<span class="w"> </span>--timeout<span class="o">=</span>5s<span class="w"> </span>--start-period<span class="w"> </span><span class="o">=</span><span class="w"> </span>1m<span class="se">\</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span>CMD<span class="w"> </span>curl<span class="w"> </span>-f<span class="w"> </span>http://localhost/<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
</span></code></pre></div></p>
<p>A more complex example
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">nginx:1.18-alpine</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">ENV</span><span class="w"> </span><span class="nv">NGX_ROOT</span><span class="o">=</span><span class="s2">&quot;/usr/data/html&quot;</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">ADD</span><span class="w"> </span>index.html<span class="w"> </span><span class="si">${</span><span class="nv">NGX_ROOT</span><span class="si">}</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="k">ADD</span><span class="w"> </span>entrypoint.sh<span class="w"> </span>/bin/
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">80</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">HEALTHCHECK</span><span class="w"> </span>--start-period<span class="w"> </span><span class="o">=</span><span class="w"> </span>3s<span class="w"> </span>--interval<span class="o">=</span><span class="m">10</span><span class="w"> </span>--timeout<span class="o">=</span>1s<span class="w"> </span>CMD<span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>-<span class="w"> </span>-q<span class="w"> </span>http://<span class="o">{</span>IP:-0.0.0.0<span class="o">}</span>:<span class="si">${</span><span class="nv">PORT</span><span class="k">:-</span><span class="nv">80</span><span class="si">}</span>/
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/usr/sbin/nginx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-g&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;daemon off;&quot;</span><span class="p">]</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/bin/entrypoint.sh&quot;</span><span class="p">]</span>
</span></code></pre></div>
The check result will show in console:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>web1<span class="w"> </span>--rm<span class="w"> </span>-P<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;PORT=8080&quot;</span><span class="w"> </span>ngx:v0.1
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="m">127</span>.0.0.1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">10</span>/May/2020:18:11:20<span class="w"> </span>+0000<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;Wget&quot;</span><span class="w"> </span><span class="s2">&quot;-&quot;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="m">127</span>.0.0.1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">10</span>/May/2020:18:11:23<span class="w"> </span>+0000<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;Wget&quot;</span><span class="w"> </span><span class="s2">&quot;-&quot;</span>
</span></code></pre></div></p>
<h2 id="_15"><a class="toclink" href="../../2020/05/10/dockerfile/#_15"></a></h2>
<h4 id="shell"><a class="toclink" href="../../2020/05/10/dockerfile/#shell">SHELL</a></h4>
<p>The SHELL instruction allows the default shell used for the shell form of commands to be overridden. The default shell on Linux is [&ldquo;/bin/sh&rdquo;, &ldquo;-c&rdquo;], and on Windows is [&ldquo;cmd&rdquo;, &ldquo;/S&rdquo;, &ldquo;/C&rdquo;]. The SHELL instruction must be written in JSON form in a Dockerfile.
* Syntax
  * SHELL [&ldquo;executable&rdquo;, &ldquo;parameters&rdquo;]
* Example
  * <code>SHELL ["powershell", "-command"]</code>
  * <code>SHELL ["/usr/bin/zsh", "-c"]</code></p>
<h2 id="_16"><a class="toclink" href="../../2020/05/10/dockerfile/#_16"></a></h2>
<h4 id="stopsignal"><a class="toclink" href="../../2020/05/10/dockerfile/#stopsignal">STOPSIGNAL</a></h4>
<p>sets the system call signal that will be sent to the container to exit.
* Syntex
  * STOPSIGNAL signal</p>
<h2 id="_17"><a class="toclink" href="../../2020/05/10/dockerfile/#_17"></a></h2>
<h4 id="arg"><a class="toclink" href="../../2020/05/10/dockerfile/#arg">ARG</a></h4>
<p>The ARG instruction defines a variable that users can pass at build-time to the <strong>builder</strong> with the <strong>docker build</strong> command using the &ndash;build-arg <varname>=<value> flag. If a user specifies a build argument that was not defined in the Dockerfile, the build outputs a warning.
This provide a way to use one dockerfile to meet different requirement
* Syntex
  * ARG \<name>[=\<default value>]</p>
<p>example:
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>...
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">auther</span><span class="o">=</span><span class="s2">&quot;ray-x&quot;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="k">LABEL</span><span class="w"> </span><span class="nv">maintainer</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">auther</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>...
</span></code></pre></div>
Use &ndash;build-arg to pass the ARG in
<code>docker build --build-arg auther="ray-x rayx@mail.com"</code></p>
<h2 id="_18"><a class="toclink" href="../../2020/05/10/dockerfile/#_18"></a></h2>
<h4 id="onbuild"><a class="toclink" href="../../2020/05/10/dockerfile/#onbuild">ONBUILD</a></h4>
<p>The ONBUILD instruction adds a trigger instruction to be executed at a later time, when the image is used as the base for another build.
The trigger will be executed in the context of the downstream build, as if it had been inserted immediately after the FROM instruction in the downstream Dockerfile.
* Syntax
  * ONBUILD \<INSTRUCTION>
  * ONBUILD can not use in ONBUILD <code>ONBUILD ONBUILD CMD ["ls"]</code> is illegal
  * Use onbuild tag for base image has onbuild
  * COPY, ADD may not work....(different context)</p>
<p>e.g. docker nginx1:v0-onbuild
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>...
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">ONBUILD</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span>http://nginx.org/download/nginx-1.18.0.tar.gz<span class="w"> </span>/usr/local/src
</span></code></pre></div></p>
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">nginx1:v0-onbuild</span>
</span></code></pre></div>
    <nav class="md-post__action">
      <a href="../../2020/05/10/dockerfile/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-09 00:00:00">May 9, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="docker-storage"><a class="toclink" href="../../2020/05/09/docker-storage/">Docker storage</a></h2>
<p>Quote from docker.com &ldquo;Copy-on-write is a strategy of sharing and copying files for maximum efficiency. If a file or
directory exists in a lower layer within the image, and another layer (including the writable layer) needs read access
to it, it just uses the existing file. The first time another layer needs to modify the file (when building the image or
running the container), the file is copied into that layer and modified. This minimizes I/O and the size of each of the
subsequent layers. These advantages are explained in more depth below.&rdquo;</p>
<p>COW is low efficiency and thus I/O intensive application will need to mount data volume from host to docker.</p>
<p>Storage volume will help data persistency after docker image removed. Also split data with binary executable.</p>
<h3 id="bind-mounts"><a class="toclink" href="../../2020/05/09/docker-storage/#bind-mounts">Bind mounts</a></h3>
<p>A volume that points to a user specified location on host file system
<img alt="bind mount" src="https://docs.docker.com/storage/images/types-of-mounts-bind.png" /> /my/bind/volume -&gt; (bind) to host
/user/configured/directory</p>
<h3 id="docker-managed-volume"><a class="toclink" href="../../2020/05/09/docker-storage/#docker-managed-volume">Docker managed volume</a></h3>
<p>Docker deamon creates managed volumes in a portion of host&rsquo;s file system that owned by docker
`var/lib/docker/vfs/dir/<volume-id></p>
<h3 id="usage-use-v-to-use-volume"><a class="toclink" href="../../2020/05/09/docker-storage/#usage-use-v-to-use-volume">Usage: Use <code>-v</code> to use volume</a></h3>
<ul>
<li>Dockage-managed volume:</li>
<li>docker run -it &ndash;name bbox1 -v /data busybox</li>
<li>docker inspect -f {{.Mounts}} bbox1<ul>
<li>Inspect bbox1 container volume, volume id and directory in host ([{volume
  bb23e94e907dc29f3e62deddd332520d34f489177c5bbd5b03a8a75426430a19
  /var/lib/docker/volumes/bb23e94e907dc29f3e62deddd332520d34f489177c5bbd5b03a8a75426430a19/_data /data local true }]
  )</li>
</ul>
</li>
<li>Bind mount volume</li>
<li>docker run -it &ndash;name bbox2 -v HOSTDIR:VOLUMEDIR busybox e.g.
    <code>docker run -it --name bbox2 -v /data/volumes/b2:/data  busybox</code></li>
<li>docker inspect -f {{.Mounts}} bbox2<ul>
<li>output: <code>[{bind  /data/volumes/b2 /data   true rprivate}]</code></li>
</ul>
</li>
</ul>
<h3 id="share-folder-and-joint-container-with-v-and-volumes-from"><a class="toclink" href="../../2020/05/09/docker-storage/#share-folder-and-joint-container-with-v-and-volumes-from">Share folder and joint container with <code>-v</code> and <code>--volumes-from</code></a></h3>
<ul>
<li>User case duplicate setup/data:</li>
<li>Container A startup and access file/setup F in host.</li>
<li>Container B startup and access F through container A</li>
<li>Container C startup and access F through container A</li>
<li>Container A could stop/pause</li>
<li>Network duplication</li>
<li>Container A startup and startup network network1 and loopback and filesystem</li>
<li>Container Nginx started up and use A to access network1 and loopback and nginx setup</li>
<li>container tomcat started up and use A to access loopback and tomcat setup</li>
<li>container mysql started up and use A to loopback and data volume</li>
<li>Application server started up and use A to access loopback</li>
</ul>
<h4 id="instruction-example"><a class="toclink" href="../../2020/05/09/docker-storage/#instruction-example">Instruction example</a></h4>
<p>Startup a infrastructure container infrcon access host folder /data/infracon/volume
<code>docker run --name infracon -it -v /data/infracon/volume/:/data/web/html busybox</code></p>
<p>Startup httpd <code>docker run --name httpd --network container:infracon --volumes-from infracon -it bosybox</code></p>
    <nav class="md-post__action">
      <a href="../../2020/05/09/docker-storage/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <a class="md-pagination__link" href="../2/">2</a> <span class="md-pagination__current">3</span> <a class="md-pagination__link" href="../4/">4</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../../archive/2024/" class="md-footer__link md-footer__link--next" aria-label="Next: 2024">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                2024
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2024 RayX
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ray-x" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/xb_I_dx" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/ray-x" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow - toc.integrate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
  
      <script src="../../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script src="../../../javascripts/custom.129bd6ad.min.js"></script>

  </body>
</html>