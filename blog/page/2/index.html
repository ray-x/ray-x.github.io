
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="关于软件、Geek | Ray，Web & Mobile Lover，Software Engineer | 这里是 @Ray睿 类喵星人的个人博客。专注求索，创新">
      
      
        <meta name="author" content="Ray-X">
      
      
        <link rel="canonical" href="https://ray-x.github.io/blog/page/2/">
      
      
        <link rel="prev" href="../../..">
      
      
        <link rel="next" href="../../archive/2024/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Blog - Ray-X</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


  
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
  
  <style>.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"/></svg>');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"/></svg>');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"/></svg>');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');}.md-tag.md-tag--go{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.811 10.231c-.047 0-.058-.023-.035-.059l.246-.315c.023-.035.081-.058.128-.058h4.172c.046 0 .058.035.035.07l-.199.303c-.023.036-.082.07-.117.07zM.047 11.306c-.047 0-.059-.023-.035-.058l.245-.316c.023-.035.082-.058.129-.058h5.328c.047 0 .07.035.058.07l-.093.28c-.012.047-.058.07-.105.07zm2.828 1.075c-.047 0-.059-.035-.035-.07l.163-.292c.023-.035.07-.07.117-.07h2.337c.047 0 .07.035.07.082l-.023.28c0 .047-.047.082-.082.082zm12.129-2.36c-.736.187-1.239.327-1.963.514-.176.046-.187.058-.34-.117-.174-.199-.303-.327-.548-.444-.737-.362-1.45-.257-2.115.175-.795.514-1.204 1.274-1.192 2.22.011.935.654 1.706 1.577 1.835.795.105 1.46-.175 1.987-.77.105-.13.198-.27.315-.434H10.47c-.245 0-.304-.152-.222-.35.152-.362.432-.97.596-1.274a.315.315 0 0 1 .292-.187h4.253c-.023.316-.023.631-.07.947a4.983 4.983 0 0 1-.958 2.29c-.841 1.11-1.94 1.8-3.33 1.986-1.145.152-2.209-.07-3.143-.77-.865-.655-1.356-1.52-1.484-2.595-.152-1.274.222-2.419.993-3.424.83-1.086 1.928-1.776 3.272-2.02 1.098-.2 2.15-.07 3.096.571.62.41 1.063.97 1.356 1.648.07.105.023.164-.117.2m3.868 6.461c-1.064-.024-2.034-.328-2.852-1.029a3.665 3.665 0 0 1-1.262-2.255c-.21-1.32.152-2.489.947-3.529.853-1.122 1.881-1.706 3.272-1.95 1.192-.21 2.314-.095 3.33.595.923.63 1.496 1.484 1.648 2.605.198 1.578-.257 2.863-1.344 3.962-.771.783-1.718 1.273-2.805 1.495-.315.06-.63.07-.934.106zm2.78-4.72c-.011-.153-.011-.27-.034-.387-.21-1.157-1.274-1.81-2.384-1.554-1.087.245-1.788.935-2.045 2.033-.21.912.234 1.835 1.075 2.21.643.28 1.285.244 1.905-.07.923-.48 1.425-1.228 1.484-2.233z"/></svg>');}</style>

    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link rel="stylesheet" href="../../../stylesheets/custom.00c04c01.min.css">
  <link rel="stylesheet" href="../../../stylesheets/main.css">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
  Build something fun with <strong>@ray-x</strong> on
  <a href="https://twitter.com/x_II_x">
    <span class="twemoji twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </span>
    <strong>Twitter</strong>
  </a>

          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Ray-X" class="md-header__button md-logo" aria-label="Ray-X" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ray-X
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ray-x" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-x.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Ray-X" class="md-nav__button md-logo" aria-label="Ray-X" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    Ray-X
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ray-x" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-x.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    latest
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            latest
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023/12/20/asyncio-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asyncio python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023/12/19/python-django-restful-framework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Django Restful Framework
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    tags
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            tags
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tags
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog<a class="headerlink" href="#blog" title="Permanent link">&para;</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-19 00:00:00">December 19, 2023</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="python-fundamental"><a class="toclink" href="../../2023/12/19/python-fundamental/">Python Fundamental</a></h2>
<ul>
<li>Fundamental of Python, a Jump start</li>
<li><a href="https://leetcode.com/discuss/study-guide/2122306/Python-Cheat-Sheet-for-Leetcode">Python Cheat Sheet for Leetcode - LeetCode Discuss</a></li>
<li>Create a list with size:<ul>
<li>python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="p">[]</span> <span class="o">*</span> <span class="mi">10</span> <span class="c1">#THIS WONT WORK</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">[{}]</span> <span class="o">*</span> <span class="mi">3</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">[[]]</span> <span class="o">*</span> <span class="mi">3</span>
</span></code></pre></div></li>
</ul>
</li>
<li>Sort/Heap  <a href="https://docs.python.org/3/howto/sorting.html">Sorting HOW TO</a><ul>
<li>Note: sorted() will return a sorted list, it not change the original one
  while list.sort() will change the original list</li>
</ul>
</li>
<li>Key Func:<ul>
<li>a func to be called on each list elem, e.g. key=str.lower</li>
<li>it can be a lambda, e.g. key = lambda student: student.first_ name</li>
<li>The Key Functions are used in {{embed(((64a3827c-147d-443e-bb06-6b0e9f3ef2e0)))}}</li>
</ul>
</li>
<li>operator  <code>**from** **operator** **import** itemgetter, attrgetter</code><ul>
<li>2<sup>nd</sup> and then 3<sup>rd</sup> element in tuple/list:   <code>sorted(student_{ tuples,} key=itemgetter(2, 3))</code></li>
<li>sort based on class attribute:  <code>sorted(student_{ objects,} key=attrgetter('grade', 'age'))</code></li>
<li>Note: itemgetter for list/tuple and  attrgetter is for class</li>
</ul>
</li>
<li>Comparison Functions  <a href="https://www.geeksforgeeks.org/how-does-the-functools-cmp_to_key-function-works-in-python/">How does the functools cmp_ to_ key function works in Python? - GeeksforGeeks</a></li>
<li>functools.cmp_ to_ key(callable)<ul>
<li>A comparison/callable function is any callable that accepts two arguments, compares them, and returns a negative number for less-than, zero for equality,</li>
<li>example:</li>
<li>python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">import</span> <span class="nn">functools</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">def</span> <span class="nf">mycmp</span><span class="p">(</span><span class="n">student1</span><span class="p">,</span> <span class="n">student2</span><span class="p">):</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;comparing &quot;</span><span class="p">,</span> <span class="n">student1</span><span class="p">,</span> <span class="s2">&quot; and &quot;</span><span class="p">,</span> <span class="n">student2</span><span class="p">)</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  <span class="k">if</span> <span class="n">student1</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">student2</span><span class="o">.</span><span class="n">age</span><span class="p">:</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>      <span class="k">return</span> <span class="mi">1</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>  <span class="k">elif</span> <span class="n">student1</span><span class="o">.</span><span class="n">name</span> <span class="o">&lt;</span> <span class="n">student2</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>  <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>      <span class="k">return</span> <span class="mi">0</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">student</span><span class="p">(</span><span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">student</span><span class="p">(</span><span class="s2">&quot;Mike&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">)],</span> <span class="n">key</span><span class="o">=</span><span class="n">functools</span><span class="o">.</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="n">mycmp</span><span class="p">)))</span>
</span></code></pre></div></li>
</ul>
</li>
<li>Iterator
  term:: An iterator is a Python object that implements a specific interface. <sub>iter___</sub> return instance of iterator and <strong>next()</strong> method steps the iterator on cycle and return a value to next object
  id:: 65137d16-a06a-40e4-b28e-5fa4474017d5</li>
<li><strong>functools: cache</strong><ul>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/functools" title="GitHub User: functools">@functools</a>.<strong>cache</strong>(<em>user_ function</em>)</li>
<li>python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span> <span class="nn">functools</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="nd">@functools</span><span class="o">.</span><span class="n">cache</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">n</span> <span class="k">else</span> <span class="mi">1</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">factorial</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>      <span class="c1"># no previously cached result, makes 11 recursive calls</span>
</span></code></pre></div></li>
</ul>
</li>
<li><strong>list comprehension</strong><ul>
<li><a href="https://realpython.com/list-comprehension-python/">When to Use a List Comprehension in Python – Real Python</a></li>
<li>baisic<ul>
<li>python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">List</span> <span class="o">=</span> <span class="p">[</span><span class="n">character</span> <span class="k">for</span> <span class="n">character</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">List</span><span class="p">)</span> <span class="c1">#[1, 2, 3]</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="c1">#[0, 2, 4, 6, 8, 10]</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="c1"># 3x3 matrix</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>       <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># [0, 40, 80]</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;Geeks4Geeks&#39;</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="c1"># Toggle case of each character</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="n">List</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">^</span> <span class="mi">32</span><span class="p">),</span> <span class="n">string</span><span class="p">))</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="c1"># [&#39;g&#39;, &#39;E&#39;, &#39;E&#39;, &#39;K&#39;, &#39;S&#39;, &#39;\x14&#39;, &#39;g&#39;, &#39;E&#39;, &#39;E&#39;, &#39;K&#39;, &#39;S&#39;]</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="c1"># Reverse each string in tuple</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="n">List</span> <span class="o">=</span> <span class="p">[</span><span class="n">string</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Geeks&#39;</span><span class="p">,</span> <span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="s1">&#39;Geeks&#39;</span><span class="p">)]</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="c1"># [&#39;skeeG&#39;, &#39;rof&#39;, &#39;skeeG&#39;]</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="c1"># Remove Multiple Values</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="n">ls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;One&#39;</span><span class="p">,</span> <span class="s1">&#39;Two&#39;</span><span class="p">,</span> <span class="s1">&#39;Three&#39;</span><span class="p">,</span> <span class="s1">&#39;Three&#39;</span><span class="p">]</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="n">to_remove</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Three&#39;</span><span class="p">,</span> <span class="s1">&#39;Four&#39;</span><span class="p">]</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="n">ls</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">]</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="c1">#Tree BFS</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="p">[</span><span class="n">child</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="k">if</span> <span class="n">child</span><span class="p">]</span>
</span></code></pre></div></li>
</ul>
</li>
</ul>
</li>
<li>Map, Filter, Reduce and Zip
  id:: 6506c411-3211-4b0c-9647-637d211344b3<ul>
<li><a href="https://www.learnpython.org/en/Map%2C_Filter%2C_Reduce">Map, Filter, Reduce - Learn Python - Free Interactive Python Tutorial</a><ul>
<li>Map and Filter return iterator (not list)
  <a id="map">Map</a></li>
<li><strong>Map(func, *iterables)</strong><ul>
<li>Samples
  <div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span>  <span class="p">[</span><span class="s1">&#39;alfred&#39;</span><span class="p">,</span> <span class="s1">&#39;tabitha&#39;</span><span class="p">,</span> <span class="s1">&#39;william&#39;</span><span class="p">,</span> <span class="s1">&#39;arla&#39;</span><span class="p">]))</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span>  <span class="p">[</span><span class="mf">3.56773</span><span class="p">,</span> <span class="mf">5.57668</span><span class="p">,</span> <span class="mf">4.00914</span><span class="p">,</span> <span class="mf">56.24241</span><span class="p">,</span> <span class="mf">9.01344</span><span class="p">,</span> <span class="mf">32.00013</span><span class="p">],</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)))</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="c1"># 3rd parameter is parameter to round</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="n">z</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="c1">#[11, 44, 99, 176, 275]</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>Filter(func, iterable)</strong></p>
<ul>
<li>list(filter(lambda v: v &gt; 75,  [66, 90, 68, 59, 76, 60, 88, 74, 81, 65]))</li>
<li>filter and list comprehension</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="p">[</span><span class="o">&lt;</span><span class="n">exp1</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">iterable</span><span class="o">&gt;</span> <span class="k">if</span> <span class="o">&lt;</span><span class="n">logic</span> <span class="n">expression</span><span class="o">&gt;</span><span class="p">]</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">]</span>
</span></code></pre></div>
        - <strong>reduce(func, iterable[, initial])</strong>
- python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="k">def</span> <span class="nf">custom_sum</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="k">return</span> <span class="n">first</span> <span class="o">+</span> <span class="n">second</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">result</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">custom_sum</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></code></pre></div>
- Another using reduce to implement #Trie [[DSA/Trie]]
    - python
      <div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">Trie</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">Trie</span><span class="p">)</span> <span class="c1">#constructor return default dict</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">trie</span> <span class="o">=</span> <span class="n">Trie</span><span class="p">()</span> <span class="c1"># dict to lambda</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="n">END</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="c1"># Insert words into the trie</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;apricot&quot;</span><span class="p">,</span> <span class="s2">&quot;bear&quot;</span><span class="p">,</span> <span class="s2">&quot;beach&quot;</span><span class="p">]</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">reduce</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">trie</span><span class="p">)[</span><span class="n">END</span><span class="p">]</span> <span class="o">=</span> <span class="n">word</span>
</span></code></pre></div>
    - e.g. word  &lsquo;apple&rsquo;. then trie[&lsquo;a&rsquo;]  dict{&lsquo;p&rsquo;: dict{&lsquo;p&rsquo;: dict{&lsquo;l&rsquo;: dict{&lsquo;e&rsquo;: dict{True:&rsquo;apple&rsquo;}}}}}
        - Zip
- creates an iterator that will aggregate elements from <strong>zero to more</strong> iterables.
    - zip([1, 2]); zip([1, 2], [&lsquo;a&rsquo;, &lsquo;b&rsquo;])
    - zip most useful to create &lt;<dict>&gt;
    - List comprehensions
      id:: 650c181a-1ea2-475c-a09b-35a4aa6ecd39
      <code>[x * y for x, y in zip([1, 2, 3], [3, 4, 5])]</code>
-
- Heap #heapq
    - Operations:
        - peek: there are <strong>no peek</strong>, use heap[0] instead
        - heappush
        - heappop
- python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">h</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    <span class="n">heappush</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="k">return</span> <span class="p">[</span><span class="n">heappop</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">h</span><span class="p">))]</span>
</span></code></pre></div>
        - heappushpop(heap, item) push item and pop and return top element
        - heapify(x) : transform list x to heap, inplace O(n)
        - heapreplace(heap, item) pop smallest item and push new item, raise error if empty.  It is efficient for fixed size heap. It works like poppush
        - merge: merge multiple sorted input into a single sorted. It return a iterable(not al ist)
        - <strong>nlargest</strong> &amp; <strong>nsmallest</strong>:  return list of n largest/smallest elements, Equivalent to: <code>sorted(iterable, key=key, reverse=True/False)[:n]</code>
- Counter
    - <a href="https://realpython.com/python-counter/">Python&rsquo;s Counter: The Pythonic Way to Count Objects – Real Python</a>
    - counter.update(): the implementation provided by <strong>Counter</strong> adds existing counts together. It also creates new key-count pairs when necessary.
        - python
          <div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">({</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;missouri&quot;</span><span class="p">)</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">sales</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">apple</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">orange</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">banana</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="c1"># Use a counter</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">monday_sales</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">apple</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">orange</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">banana</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">sales</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">monday_sales</span><span class="p">)</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">sales</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">})</span>
</span></code></pre></div>
        - keys(): list of all keys
        - values(): list of all values
- python
  <div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">cnt</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s2">&quot;AABC&quot;</span><span class="p">)</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">cnt</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>   <span class="c1"># 4</span>
</span></code></pre></div>
        - most_ common()  This method returns a list of (object, count) sorted by the objects’ current count
        -
- Enum
    - python
      <div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="c1"># class syntax</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    <span class="n">RED</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>    <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>    <span class="n">BLUE</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="c1"># functional syntax  👍</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="n">Color</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;RED&#39;</span><span class="p">,</span> <span class="s1">&#39;GREEN&#39;</span><span class="p">,</span> <span class="s1">&#39;BLUE&#39;</span><span class="p">])</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="n">my_color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">RED</span>
</span></code></pre></div>
- Const/Final
    - python
      <div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Final</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="n">PI</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span>  <span class="mf">3.14</span>
</span></code></pre></div>
- [[Comments]]
    - [[Sep 21<sup>st</sup>, 2023]]
        - ((650c181a-1ea2-475c-a09b-35a4aa6ecd39))
-</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
    <nav class="md-post__action">
      <a href="../../2023/12/19/python-fundamental/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-19 00:00:00">December 19, 2023</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="python-oop-and-metaprogramming"><a class="toclink" href="../../2023/12/19/python-oop-and-metaprogramming/">Python OOP and MetaProgramming</a></h2>
<ul>
<li><a href="../assets/Python+Deep+Dive+4_1696669164886_0.pdf">Python+Deep+Dive+4.pdf</a></li>
<li>Properties<ul>
<li>In many languages direct access to attributes is highly discouraged Instead the convention is to make the attribute private, and create public getter and setter methods</li>
<li>Python property<ul>
<li>((65211fdc-5010-4ade-975c-c0cf9b480269))</li>
<li>((65212021-413d-4bcd-a1c1-81a964e79a45))</li>
</ul>
</li>
<li>property decorator <code>@property</code><ul>
<li>((652120be-a7ed-40a4-9429-a7b7c1d4eb95))</li>
</ul>
</li>
<li>ReadOnly Properties<ul>
<li>((6521213b-5183-4825-bca2-9dec4e4565c2))</li>
</ul>
</li>
</ul>
</li>
<li>Class Scope<ul>
<li>((652121ac-37ec-428c-90ba-8a4dd4b79ac0))</li>
<li>
<h3 id="652121e6-0bca-48f3-9aae-de800eed9d41"><a class="toclink" href="../../2023/12/19/python-oop-and-metaprogramming/#652121e6-0bca-48f3-9aae-de800eed9d41">((652121e6-0bca-48f3-9aae-de800eed9d41))</a></h3>
</li>
</ul>
</li>
<li>
<p>Enumerators And Alias</p>
<ul>
<li>Enum class</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>  <span class="n">red</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>  <span class="n">crimson</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>  <span class="n">carmine</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>  <span class="n">blue</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>  <span class="n">black</span> <span class="o">=</span> <span class="mi">3</span>
</span></code></pre></div>
- auto values
    - <code>enum.auto()</code> generate a auto values for enum
- MetaProgramming
- <code>type</code>
    - <code>type</code> is a <strong>class</strong></p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  class type:
    def __init__(self):
        在空值初识话数据

    def __new__(self):
          # __new__ from object
        创建-&gt;创建类
  ```
    - create a class with `type`: `type(class_name, class_base, class_dict)`
- `type` allow you create new class programmly
</code></pre></div>
<ul>
<li>
<p>Metaclass</p>
<ul>
<li>The class used to create a class, is called <strong>metaclass</strong> of that class, e.g. <code>MyType</code> is metaclass of <code>Person</code></li>
<li>By dflt, <code>type</code> is used to create a new class, but now if <code>metaclass</code> specified, it will be replace <code>type</code></li>
<li>Create a new class from MyType
  MyType</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">class</span> <span class="nc">MyType</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>        <span class="n">xx</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>        <span class="k">return</span> <span class="n">xx</span>
</span></code></pre></div>
    * method 1 use MyType()</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">Foo</span> <span class="o">=</span> <span class="n">MyType</span><span class="p">(</span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s2">&quot;v1&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s2">&quot;func&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="mi">999</span><span class="p">})</span>
</span></code></pre></div>
    * method 2 use metaclass</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">MyType</span><span class="p">):</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="n">v1</span> <span class="o">=</span> <span class="mi">123</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>        <span class="k">return</span> <span class="mi">999</span>
</span></code></pre></div>
- If Base class created with metaclass, all child/grandchild class of Base will be create with same metaclass
- ((652124f8-b924-4054-8d9b-e56256794d28))
-</p>
</li>
</ul>
</li>
</ul>
    <nav class="md-post__action">
      <a href="../../2023/12/19/python-oop-and-metaprogramming/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-19 00:00:00">December 19, 2023</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="python-310"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/">Python 3.10</a></h2>
<h3 id="structural-pattern-matching-python-version-of-switch"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#structural-pattern-matching-python-version-of-switch">Structural Pattern Matching, python version of <code>switch</code></a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="n">language</span><span class="p">):</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="k">match</span> <span class="n">language</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span class="k">case</span> <span class="s2">&quot;Java&quot;</span> <span class="o">|</span> <span class="s2">&quot;Javascript&quot;</span><span class="p">:</span>  <span class="c1"># multiple pattern match</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>            <span class="k">return</span> <span class="s2">&quot;Love those braces!&quot;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="k">case</span> <span class="s2">&quot;Python&quot;</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>            <span class="k">return</span> <span class="s2">&quot;I&#39;m a lumberjack and I don&#39;t need no braces&quot;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>  <span class="c1">#default</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="k">return</span> <span class="s2">&quot;I have no clue!&quot;</span>
</span></code></pre></div>
<h4 id="we-could-match-against-one-or-more-literals-by-using-the-or-pattern"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#we-could-match-against-one-or-more-literals-by-using-the-or-pattern">We could match against one or more literals by using the OR pattern <code>|</code></a></h4>
<h3 id="capturing-match"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#capturing-match">Capturing match</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span> <span class="nf">op</span><span class="p">(</span><span class="n">command</span><span class="p">):</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="k">match</span> <span class="n">command</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        <span class="k">case</span> <span class="p">[</span><span class="s2">&quot;move&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;F&quot;</span> <span class="o">|</span> <span class="s2">&quot;B&quot;</span> <span class="o">|</span> <span class="s2">&quot;L&quot;</span> <span class="o">|</span><span class="s2">&quot;R&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">direction</span><span class="p">]:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>            <span class="k">return</span> <span class="n">symbols</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        <span class="k">case</span> <span class="s2">&quot;pick&quot;</span><span class="p">:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="k">return</span> <span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;pick&quot;</span><span class="p">]</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        <span class="k">case</span> <span class="s2">&quot;drop&quot;</span><span class="p">:</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="k">return</span> <span class="n">symvols</span><span class="p">[</span><span class="s2">&quot;drop&quot;</span><span class="p">]</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s2"> does not compute!&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="it-match-move-f-move-b-move-l-move-r"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#it-match-move-f-move-b-move-l-move-r">It match <code>"move F"</code>, <code>"move B"</code> <code>"move L"</code> <code>"move R"</code></a></h4>
<h2 id="union"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#union">*union* ~|~</a></h2>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">s1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">}</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">s2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">s1</span> <span class="o">|</span> <span class="n">s2</span> <span class="c1">#[[{&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;}]]</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="n">d1</span> <span class="o">|</span> <span class="n">d2</span>  <span class="c1"># {&#39;c&#39;: 3, &#39;d&#39;: 40, &#39;a&#39;: 1, &#39;b&#39;: 2}</span>
</span></code></pre></div>
<h2 id="assignment-expressions"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#assignment-expressions">assignment expressions <code>:=</code></a></h2>
<h3 id="it-assign-value-and-return-the-values"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#it-assign-value-and-return-the-values">it assign value and return the values</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">(</span><span class="n">x</span><span class="o">:=</span><span class="mi">1</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># output 4 and x=4</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">:=</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span>  <span class="c1"># same as a=x=30</span>
</span></code></pre></div>
<h3 id="examples"><a class="toclink" href="../../2023/12/19/whats-new-in-python-310/#examples">examples</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">even_results</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="n">result</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">:=</span> <span class="n">slow_function</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">]</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">def</span> <span class="nf">even_random</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">cnt</span> <span class="o">:=</span> <span class="n">cnt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">number</span> <span class="o">:=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>            <span class="k">yield</span> <span class="n">number</span>
</span></code></pre></div>
<p>*</p>
    <nav class="md-post__action">
      <a href="../../2023/12/19/whats-new-in-python-310/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-19 00:00:00">December 19, 2023</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              19 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="python-basic"><a class="toclink" href="../../2023/12/19/python-basic/">python basic</a></h2>
<ul>
<li><a href="../assets/Python+Deep+Dive+1_1694868717879_0.pdf">Python+Deep+Dive+1.pdf</a></li>
<li>Refresher<ul>
<li>Multi-line Statement in Python:<ul>
<li>To extend the statement to one or more lines we can use braces {}, parentheses (), square [], semi-colon “;”, and continuation character slash “\”.</li>
<li>For string you can use <code>'''</code> or <code>"""</code> for a multiple line string
  <div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>        <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span class="p">]</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Initializing a list using the</span><span class="se">\</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="s1"> Implicit multi-line statement&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">g</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;geeks</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="s2">for</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="s2">geeks&quot;&quot;&quot;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1"># Initializing a mathematical expression</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># using the Implicit multi-line statement.</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">add</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span> <span class="o">+</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>       <span class="mi">40</span> <span class="o">-</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>       <span class="mi">52</span><span class="p">)</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">if</span> <span class="n">a</span> \
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>  <span class="ow">and</span> <span class="n">b</span><span class="p">:</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>  <span class="k">pass</span>
</span></code></pre></div></li>
</ul>
</li>
<li>Variable Naming<ul>
<li>((6505ac52-5d0c-4272-8c97-ea3ab05e7dcd))</li>
</ul>
</li>
<li>Condition Expression<ul>
<li><code>5 &lt; a &lt; 7</code> vs <code>5&lt;a and a&lt;7</code></li>
<li>ternary<ul>
<li><code>b = 1 if a &lt; 5 else 2</code></li>
<li><code>var = exp1 if con-exp2 else exp2</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Continue, break, while, else, try, catch, finally</p>
<ul>
<li>The <code>continue</code> statement skips the current iteration of a loop and continues with the next iteration.</li>
<li><code>finally</code> will be executed even with <code>continue|break</code></li>
<li>loop altogether, and the program continues after the loop. aka <code>goto loop_exit</code></li>
<li>Inside try-except-finally</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># in a for Statement</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  <span class="k">try</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;trying...&#39;</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>      <span class="k">continue</span>   <span class="c1">#break</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;still trying...&#39;</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>  <span class="k">except</span><span class="p">:</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Something went wrong.&#39;</span><span class="p">)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>  <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done!&#39;</span><span class="p">)</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loop ended.&#39;</span><span class="p">)</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="c1"># Prints trying...</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="c1"># Prints Done!</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="c1"># Prints trying...</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="c1"># Prints Done!</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="c1"># Prints Loop ended.</span>
</span></code></pre></div>
- finally clause is executed before starting(break; exit) the next iteration.
- <code>break</code> with <code>for/while-else</code>
    - If the loop terminates <strong>prematurely</strong> with <code>break</code>, the else clause won’t be executed.</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  # Break the for loop at &#39;blue&#39;
  colors = [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;, &#39;yellow&#39;]
  for x in colors:
      if x == &#39;blue&#39;:
          break
      print(x)
  else:
      print(&#39;Done!&#39;) #will never executed
  # Prints red green
  ```
</code></pre></div>
<ul>
<li>Variable<ul>
<li><em>Everything</em> is object</li>
</ul>
</li>
<li>e.g. int is <Class 'int'><ul>
<li>Python Garbage Collection</li>
</ul>
</li>
<li>Viewing reference counts in Python</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;my-string&#39;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">a</span>  <span class="c1"># set ref count to 0</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">gc</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gc</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="p">(</span><span class="mi">595</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="mi">577</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gc</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></code></pre></div>
- Disabling the garbage collector
    - <a href="https://instagram-engineering.com/dismissing-python-garbage-collection-at-instagram-4dca40b29172">Dismissing Python Garbage Collection at Instagram | by Instagram Engineering | Instagram Engineering</a>
    - When share memory or object reused repeatedly disable GC can save
- Python object id() is used to get location of a object
    - Type
- Python is Dynamic typed, use <code>type()</code> to get object type
- Python access variable data value through reference. Object can bind to different type (change reference) durning execution
    - Mutable vs immutable
- ((650790fd-e50a-4807-9705-97324dbb967b))
- Inmutable: create a new object if value changed, <code>id(my_var)</code> changes when value changed.
- Why it is important?
    - Side-effect
    - performance
- Notes
    - mutable can change id. E.g. <code>list.appen(val)</code> vs <code>list += [val]</code> vs <code>list = list+[val]</code>. The last <code>list=list+[val]</code> creates a new object
    - use <code>append</code> or <code>+=</code> when possible
    - A immutable object can have mutable objects</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  t = ([1], [3])
  t[0].append(2)
  ```
- immutable are safe from unintended side-effect (e.g. func call)
- to prevent side-effect, use copy() to shallow copy a mutable object(e.g. list)
- Share reference
</code></pre></div>
<ul>
<li>python share reference by default
  ((65079bf5-d1fd-48ef-aa24-680ec28b97cd))</li>
<li>With mutable objects e.g. list, Python will <strong>NEVER</strong> create shared reference. This may confusing with</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">b</span><span class="o">=</span><span class="n">a</span> <span class="c1">#reference</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>  <span class="c1">#does not share with a/[1,2]</span>
</span></code></pre></div>
- Python pr-create values [-5, 256] so if value in that range, it will share reference
    - Equality
- <code>is</code> identity operator <code>id(a) == id(b)</code>
- Sample</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">b</span>
</span></code></pre></div>
- All objects of None are same. Same id and same value <code>a is None</code>
    - Numbers
- Python does handle allication memory/bytes for numbers based on the value, e.g. <span class="arithmatex">\(2^{1000}\)</span> use 160 bytes
- The larger the number the more memory
- <code>floor</code> is largest(in stardard number order)</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">floor</span><span class="p">(</span><span class="mf">3.3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">3</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">floor</span><span class="p">(</span><span class="o">-</span><span class="mf">3.3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">4</span>
</span></code></pre></div>
    - <code>/</code> divide -&gt; float
    - <code>//</code> divide floor -&gt; int
    - <code>%</code> reminder -&gt; int
    - int(10.9)  -&gt; truncation 10
- Integer / int
    - constructor  <code>int(10.1); int(True); int(Decimal("10.2")); int("10")</code>
    - With Base. <code>int("1010", 2) ; int("1010", base=2)</code>
    - <code>bin() -&gt; "0b1010";  oct() -&gt; "0o12"; hex() -&gt; "0xa"</code>
    - <code>sign(x)</code>: <code>1 if x &gt;= 0 else -1</code>
- Rational and Fraction
    - Franction
        -
          <div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">From</span> <span class="n">factions</span> <span class="kn">import</span> <span class="nn">Fraction</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>  <span class="c1">#3/4   numerartor, denominator</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">Fraction</span><span class="p">(</span><span class="mf">3.4</span><span class="p">)</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">Fraction</span><span class="p">(</span><span class="s1">&#39;3.4&#39;</span><span class="p">)</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="n">Fraction</span><span class="p">(</span><span class="s1">&#39;3.4&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Fraction</span><span class="p">(</span><span class="mf">3.4</span><span class="p">)</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="n">Fraction</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="c1"># will be comn</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">y</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">y</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="n">Out</span><span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">6369051672525773</span><span class="p">,</span> <span class="mi">4503599627370496</span><span class="p">)</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="n">y</span><span class="o">.</span><span class="n">limit_denominator</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span></code></pre></div>
        - use y.limit_{ denominator(10)} to round denominator to close to 10
- Float
    - IEEE 754 double-precision binary float aka binary 64
        - sing 1bit
        - exponent 11bit
        - significant 52 bit
    - Equality
        - <code>math.isclose(a, b, *, rel​​​​​_​​​​​​​tol=1e - 9, abs​​_​​tol=0.0)</code>
            - e.g. <code>math.isclose(3.3, 1+2.3000)</code>
        - <code>round(val, digits)</code>  e.g. <code>round(3.1415, 2)  -&gt; 3.14</code>
        - You should always use isclose for compare float
    - Float to int
        - <code>truncation|math.trunc()</code>, <code>floor</code>, <code>ceiling</code>, <code>rounding</code>
        - trunc keep the int part. same as <code>int(val)</code>
        - <code>floor</code> largest integer LE to the val
        - <code>ceiling</code>  min{i &gt;= x}
        - round(val, n). closest multiple of 10^{ -n} , n default to 0 so round(val) -&gt; int(val)
            - round(1.25, 1) -&gt; 1.2 (to nearest val with even least significant digit)
            - Banker&rsquo;s Rounding
- decimal
    - Unlike <a href="https://www.pythontutorial.net/advanced-python/python-float/">floats</a>, Python represents decimal numbers exactly. And the exactness carries over into arithmetic
    - Decimal always associates with a <a href="https://www.pythontutorial.net/advanced-python/python-context-managers/">context</a> that controls the following aspects:
        - Precision during an arithmetic operation (default 28)
        - Rounding algorithm
    - Sample</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  import decimal
  from decimal import Decimal
  decimal.getcontext().prec = 2
  pi = Decimal(&#39;3.14159&#39;)
  print( pi * radius * radius )
  pi = Decimal(sign, (d1, d2, d3, ...), exp)
  pi = Decimal (0, (3, 1, 3, 1, 5), 4)

  10.0 == Decimal(&#39;10.0&#39;)  # .0 will be use
  0.1 != Decimal(&#39;0.1&#39;) #  print(&#39;{:.20f}&#39;.format(0.1)) 0.10000000000000000555
  ```
- Decimal arithmetic operators
    - `//` and `%`
    - `Decimal(a)//Decimal(b)` -&gt; `trunc(a/b)`
</code></pre></div>
<ul>
<li>Complex number<ul>
<li>use <code>cmath</code></li>
<li>Boolean</li>
</ul>
</li>
<li>Boolean is subclass of <code>int</code> but it is used in totally different way. Every object in python has a <code>truth value</code> (truthiness)</li>
<li><code>bool</code> class<ul>
<li><code>True</code> and <code>False</code></li>
<li>isubclass of int <code>issubclass(bool, int)</code></li>
<li>wired truth of bool</li>
<li><code>isinstance(True, int)</code>  -&gt; <code>True</code></li>
<li>True -&gt; 1; False-&gt;0  (int(True)-&gt;1; True == 1 ; True &gt; False)<ul>
<li>True + True = 2</li>
</ul>
</li>
<li>They are singleton object</li>
<li>You can use both <code>a==True</code> and <code>a is True</code> because it is singleton</li>
</ul>
</li>
<li>Truthy<ul>
<li>All objects are True except<ul>
<li>None</li>
<li>False</li>
<li>classes implement <code>__bool__</code> or <code>__len__</code> that return <code>False</code> or <code>0</code>.
  Default of <code>__bool__</code> is <code>return self != 0</code>
  e.g. <code>bool(100)</code> will execute <code>int(100).__bool__()</code> and therefore return result of <code>100 != 0</code></li>
<li>Based on above following is <code>False</code>:<ul>
<li>0 <strong>in any numeric type</strong> (0, 0.0, 0+0j)</li>
<li>empty collections (list, tuple, string, dict set)</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="for-javascript-650504dd-d2ad-48f6-b26b-b98d6c5e99dd"><a class="toclink" href="../../2023/12/19/python-basic/#for-javascript-650504dd-d2ad-48f6-b26b-b98d6c5e99dd">for [[javascript]] ((650504dd-d2ad-48f6-b26b-b98d6c5e99dd))</a></h3>
</li>
</ul>
</li>
<li>Logical operation precedence<ul>
<li>()</li>
<li>compare <code>&gt;, &lt; == !=</code></li>
<li><code>in</code> <code>is</code></li>
<li><code>and</code></li>
<li><code>or</code></li>
</ul>
</li>
<li>Short-Circuit<ul>
<li>Be care that when short-circuited, part of the expression may not executed</li>
</ul>
</li>
<li>
<p>Logic operations</p>
<ul>
<li>X or Y is equal to <code>X if X else Y</code></li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">x</span> <span class="o">=</span> <span class="mi">32</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">y</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">x</span> <span class="ow">or</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># 32</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">x</span> <span class="ow">or</span> <span class="n">y</span><span class="p">)</span> <span class="c1"># abc</span>
</span></code></pre></div>
- <code>X and Y</code>   <code>X if not X else Y</code>
    -
      <div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>x = 10
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>y =  x and 20/x  # y = 2
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>z = (s and s[0]) or &#39;&#39;  # if s: return s[0]; else return &#39;&#39;
</span></code></pre></div>
        - Comparison operators
- chained comparisons
    - In Python, chaining comparison operators is a way to simplify multiple comparison operations by stringing them together using logical operators. This is also known as “chained comparisons” or “chained comparison operators”.
    - <code>a==b==c</code>
    - <code>a&lt;b&lt;c</code>
    - <code>a&lt;b&gt;c</code>
    - <code>a&gt;b&lt;c</code>
    - <code>a&lt;b&lt;c&lt;d</code>
    -
      <div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">exp1</span> <span class="o">=</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">e</span> <span class="ow">is</span> <span class="n">f</span>
</span></code></pre></div>
- Function
    - Argument and parameter
        - Positional and keyword arguments
- It following C++ rule. If a positional parameter is defined with default value, every positional parameter after it <strong>must</strong> given a default value</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">def</span> <span class="nf">myfun</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> <span class="c1"># a positional</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>  <span class="k">pass</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">myfun</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">myfun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="n">myfun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></code></pre></div>
        - keyword argument
-
  <div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">myfun</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">my</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">myfun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#b skipped and will use default value of 100</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">myfun</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># it is ok not follow same order</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">myfun</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># ❌not correct, the rest after `a=1` must be named</span>
</span></code></pre></div>
        - Function arguments list is ((650994bb-61c3-4e01-b5a0-e7eeda531610))
- <code>*arg</code> to accept variable length arguments
    - example</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  def func(a, b, c)
    pass
  l = [1, 2, 3]
  func(*l)  #unpack  l from list to numbers

  def func2(a, b, *args)
    print(a, b, args)
  func2(10, 20, 1, 2, 3)  # 10, 20 (1, 2, 3)

  def avg((args):
    return args and xxxxsum(args)/len(args)
  ```
- all arguments after `*arg` must be ^^keyword^^ arugments

  ``` python
  def func2(a, b, *args, d)
    print(a, b, args)
  func(1, 2, 3, 4, d=5)
  ```
- ^^*^^ without name `def func(*, d)` means there are no more positional args, you must provides keyword arguments
    - it means you can not pass arguments other than &lt;&lt;keyword argument&gt;&gt;
    - e.g `func(d=32)`
- ^^/^^ : `def mod(x, y, /)` means x, and y are &lt;&lt; position ONLY parameters &gt;&gt;
</code></pre></div>
<ul>
<li>
<p><code>**kwargs</code> to unpack dict</p>
<ul>
<li>used to group keywords arguments</li>
<li>can be spicified even if positional arguments not been exausted</li>
<li><strong>NO</strong> parameters can come after **kwargs</li>
<li>Sample</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>  <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">func</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>   <span class="c1"># d=1, kwargs = {&#39;a&#39;: 2, &#39;b&#39;:3}</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>  <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># (1, 2) {a:10, b:20}</span>
</span></code></pre></div>
- you <strong>can not</strong> do this: func(a, b, **, ***kwargs)
            - Default arguments #pitfall
- It created once, the value should be treat as const. If you need the argument to be variable, e.g. <code>datetime.now()</code> do not use default argument.
    - Solution: <ins>default to None</ins>
- Another case, if initialize a default parameter with collection (e.g. list, dict). As same reason above, it will freeze a collection object to variable, if the function reused, the collection object will be resused and it may have incorrect values
    - Solution: <ins>default to Nono, not empty collection</ins>
    - sample:</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  def func(l =[]):
    l.appen(1)
    return l

  print(func())
  print(func())  # 1, 1
  ```
- This can also be used for recursion remember the results #memoization
    - factorial example:

      ``` python
      def factorial(n, cache={}):
        if n&lt;1:
          return 1
        elif n in cache:
          return cache[n]
        else:
          k = factorial(n-1)*n
          cache[n]=n*factorial(n-1)
          return k
      ```
- First-Class Functions
    - High order functions
        - A function take parameter of another function as arguments
    - Docstring PEP 257
        - 🧑‍🏫A **docstring** is a string literal that occurs as the ^^first statement^^ (exclude comments) in a module, function, class, or method definition. Such a docstring becomes the _{ doc _ special} attribute of that object.
        - function docstr stored in function. _ doc _
        - Sample:
</code></pre></div>
</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">def</span> <span class="nf">root</span><span class="p">():</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the pathname of the KOS root directory.&quot;&quot;&quot;</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    <span class="k">global</span> <span class="n">_kos_root</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    <span class="k">if</span> <span class="n">_kos_root</span><span class="p">:</span> <span class="k">return</span> <span class="n">_kos_root</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>      <span class="o">...</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;function(a, b) -&gt; list&quot;&quot;&quot;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="k">def</span> <span class="nf">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Form a complex number.</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="sd">    Keyword arguments:</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="sd">    real -- the real part (default 0.0)</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="sd">    imag -- the imaginary part (default 0.0)</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="sd">    &quot;&quot;&quot;</span>
</span></code></pre></div>
        - Annotations PEP 3107
- 🧑‍🏫Function annotations are <ins>arbitrary python expressions</ins> that are associated with various part of functions.
- Benefit: help string(e.g. with sphinx), compile check
- it stored in <code>__annotations__</code> in K:V format
- &lt;<type hints>&gt;
    - type hints is one form of annotations
- Sample:</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>  <span class="o">...</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;a repeated &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; times&#39;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>  <span class="o">...</span>
</span></code></pre></div>
        - Lambda Expressions
- Limitations
    - single line expression
    - no assignment
    - no annotations
- Syntax</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">lambda</span> <span class="n">arguments</span> <span class="p">:</span> <span class="n">expression</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">def</span> <span class="nf">appply_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">fn</span><span class="p">):</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>  <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="n">apply_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="p">)</span>
</span></code></pre></div>
- Usages
    - use in sorted <code>key</code></p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  sorted(d, key = lambda s : s.upper())
  # randomisze a string
  sorted(d, key = lambda x: random.random())
  ```
    - Introspection
</code></pre></div>
<ul>
<li><code>__name__</code> function name</li>
<li><code>__defaults__</code>, <code>__kwdefaults__</code> defaults values</li>
<li><code>__code__</code> the code objects includes<ul>
<li><code>co_varnames</code> : parameters</li>
<li><code>co_argcount</code></li>
</ul>
</li>
<li>&lt;<inspect>&gt; module<ul>
<li>isroutine: func or method</li>
<li>getsource | getmoudle | getcomments | signature<ul>
<li>callable</li>
</ul>
</li>
</ul>
</li>
<li>a object like (but not <em>limited to</em>) &lt;<functions>&gt; and &lt;<methods>&gt;</li>
<li><code>callable()</code> check if a object is callable</li>
<li>&lt;<Class>&gt; is callable</li>
<li>generators, coroutines, asynchronous generators</li>
<li>any objects implements <code>__call__</code> &lt;<Class>&gt;
        - {{embed(((6506c411-3211-4b0c-9647-637d211344b3)))}}
        - Partial function</li>
<li>samples:
    -
      <code>python
      from functools import partial

      # A normal function
      def f(a, b, c, x):
        return 1000*a + 100*b + 10*c + x

      # A partial function that calls f with
      # a as 3, b as 1 and c as 4.
      g = partial(f, 3, 1, 4)

      # Calling g()
      print(g(5))
      # A partial function with b = 1 and c = 2
      add_part = partial(add, c = 2, b = 1)

      # Calling partial function
      print(add_part(3))</code></li>
<li>Use<ul>
<li>Callback signature</li>
<li>Integration with other API<h3 id="-operator"><a class="toclink" href="../../2023/12/19/python-basic/#-operator">- Operator</a></h3>
</li>
</ul>
</li>
<li>
<h3 id="the-most-used-functions"><a class="toclink" href="../../2023/12/19/python-basic/#the-most-used-functions">The most used functions</a></h3>
</li>
</ul>
<table>
<thead>
<tr>
<th>Method</th>
<th>Signature</th>
<th>Behaves like</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>abs</code></td>
<td><code>abs(a)</code></td>
<td><code>abs(a)</code></td>
</tr>
<tr>
<td><code>add</code></td>
<td><code>add(a,b)</code></td>
<td>a+b</td>
</tr>
<tr>
<td><code>and_</code></td>
<td><code>and_(a,b)</code></td>
<td>a&amp;b</td>
</tr>
<tr>
<td><code>concat</code></td>
<td><code>concat(a,b)</code></td>
<td>string: a+b</td>
</tr>
<tr>
<td><code>contains</code></td>
<td><code>contains(a,b)</code></td>
<td><em>b in a</em></td>
</tr>
<tr>
<td><code>countOf</code></td>
<td><code>countOf(a,b)</code></td>
<td><code>a.count(b)</code></td>
</tr>
<tr>
<td><code>delitem</code></td>
<td><code>delitem(a,b)</code></td>
<td><code>del a[b]</code></td>
</tr>
<tr>
<td><code>delslice</code></td>
<td><code>delslice(a,b,c)</code></td>
<td><code>del/a[b:c]</code></td>
</tr>
<tr>
<td><code>div</code></td>
<td><code>div(a,b)</code></td>
<td>a/b</td>
</tr>
<tr>
<td><code>eq</code></td>
<td><code>eq(a,b)</code></td>
<td>a==b</td>
</tr>
<tr>
<td><code>floordiv</code></td>
<td><code>floordiv(a,b)</code></td>
<td>a//b</td>
</tr>
<tr>
<td><code>ge</code></td>
<td><code>ge(a,b)</code></td>
<td>a&gt;=b</td>
</tr>
<tr>
<td><code>getitem</code></td>
<td><code>getitem(a,b)</code></td>
<td><code>a[b]</code></td>
</tr>
<tr>
<td><code>getslice</code></td>
<td><code>getslice(a,b,c)</code></td>
<td><code>a[b:c]</code></td>
</tr>
<tr>
<td><code>gt</code></td>
<td><code>gt(a,b)</code></td>
<td>a&gt;b</td>
</tr>
<tr>
<td><code>indexOf</code></td>
<td><code>indexOf(a,b)</code></td>
<td><code>a.index(b)</code></td>
</tr>
<tr>
<td><code>invert, inv</code></td>
<td><code>invert(a)</code>, inv(a)</td>
<td>~a</td>
</tr>
<tr>
<td><code>is</code></td>
<td><code>is(a,b)</code></td>
<td>a is b</td>
</tr>
<tr>
<td><code>is_not</code></td>
<td><code>is_not(a,b)</code></td>
<td><em>a</em> is not <em>b</em></td>
</tr>
<tr>
<td><code>le</code></td>
<td><code>le(a,b)</code></td>
<td>a&lt;=b</td>
</tr>
<tr>
<td><code>lshift</code></td>
<td><code>lshift(a,b)</code></td>
<td>a&lt;&lt;b</td>
</tr>
<tr>
<td><code>lt</code></td>
<td><code>lt(a,b)</code></td>
<td>a&lt;b</td>
</tr>
<tr>
<td><code>mod</code></td>
<td><code>mod(a,b)</code></td>
<td>a%b</td>
</tr>
<tr>
<td><code>mul</code></td>
<td><code>mul(a,b)</code></td>
<td>a*b</td>
</tr>
<tr>
<td><code>ne</code></td>
<td><code>ne(a,b)</code></td>
<td>a!=b</td>
</tr>
<tr>
<td><code>neg</code></td>
<td><code>neg(a)</code></td>
<td>-a</td>
</tr>
<tr>
<td><code>not_</code></td>
<td><code>not_(a)</code></td>
<td><code>not a</code></td>
</tr>
<tr>
<td><code>or_</code></td>
<td><code>or_(a,b)</code></td>
<td>a</td>
</tr>
<tr>
<td><code>pos</code></td>
<td><code>pos(a)</code></td>
<td><code>+a</code></td>
</tr>
<tr>
<td><code>repeat</code></td>
<td><code>repeat(a,b)</code></td>
<td>a*b</td>
</tr>
<tr>
<td><code>rshift</code></td>
<td><code>rshift(a,b)</code></td>
<td>a&gt;&gt;b</td>
</tr>
<tr>
<td><code>setitem</code></td>
<td><code>setitem(a,b,c)</code></td>
<td>a[b]=c</td>
</tr>
<tr>
<td><code>setslice</code></td>
<td><code>setslice(a,b,c,d)</code></td>
<td>a[b:c]=d</td>
</tr>
<tr>
<td><code>sub</code></td>
<td><code>sub(a,b)</code></td>
<td>a-b</td>
</tr>
<tr>
<td><code>truediv</code></td>
<td><code>truediv(a,b)</code></td>
<td>a/b # &ldquo;true&rdquo; div -&gt; no truncation</td>
</tr>
<tr>
<td><code>truth</code></td>
<td><code>truth(a)</code></td>
<td><code>not not a, bool(a)</code></td>
</tr>
<tr>
<td><code>xor_</code></td>
<td><code>xor(a,b)</code></td>
<td>a^{ b}</td>
</tr>
<tr>
<td>- Most operator as dunder operater as well e..g. <code>le</code> <code>__le__</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- dunder is used for object compare e.g. a&lt;b , operator used for lambda and place need a function as argument</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- Samples</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>reduce(mul, [1,2,3])  # 6
</span></code></pre></div>
- In-place operator
    - iadd iand iconcat ifloordiv ilshift imod imul imatual ior ipow isub ixor itruediv
- attrgetter(attr)
    - 返回一个可从操作数中获取 <em>attr</em> 的可调用对象。 如果请求了一个以上的属性，则返回一个属性元组。 属性名称还可包含点号。 例如：
        - 在 f = attrgetter(&lsquo;name&rsquo;) 之后，调用 f(b) 将返回 b.name。
        - 在 f = attrgetter(&lsquo;name&rsquo;, &lsquo;date&rsquo;) 之后，调用 f(b) 将返回 (b.name, b.date)。
        - 在 f = attrgetter(&lsquo;name.first&rsquo;, &lsquo;name.last&rsquo;) 之后，调用 f(b) 将返回 (b.name.first, b.name.last)
- <code>__getattr__</code>
    - If attr not existed in object this function will be called. e.g.  <code>obj.func_ont_exist</code> or <code>getattr(obj, 'not_existed')</code>
- <code>__getattribute__</code>
    - always triggered when reference a attribute inside a object
- itemgetter(item|*item)
    - 返回一个使用操作数的 [[<a href="https://docs.python.org/zh-cn/3/library/operator.html#operator.__getitem">https://docs.python.org/zh-cn/3/library/operator.html#operator.__getitem</a>__][]] 方法从操作数中获取 /item/ 的可调用对象。 如果指定了多个条目，则返回一个查找值的元组。
    - sample</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  itemgetter(1)(&#39;ABCDEFG&#39;) #B
  itemgetter(1, 3)(&#39;ABCDEFG&#39;)  #(&#39;B&#39;, &#39;C&#39;)
  ```
</code></pre></div>
<ul>
<li>
<p>methodcaller(<em>name</em>, /, **args, ***kwargs)</p>
<ul>
<li>返回一个在操作数上调用 /name/ 方法的可调用对象。 如果给出额外的参数和/或关键字参数，它们也将被传给该方法</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">def</span> <span class="nf">methodcaller</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>    <span class="k">def</span> <span class="nf">caller</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    <span class="k">return</span> <span class="n">caller</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>  <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="n">obj</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="n">testfun</span> <span class="o">=</span> <span class="n">attrgetter</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="n">testfun</span><span class="p">(</span><span class="s2">&quot;aaa&quot;</span><span class="p">)</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="n">methodcaller</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;aaa&#39;</span><span class="p">)(</span><span class="n">obj</span><span class="p">)</span>
</span></code></pre></div>
- Closure
    - Abstract
    - Questions, keywords and cues
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>:questions-keywords-cues:
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>          - What do I already know?
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>          - Strengths and weaknesses?
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>          - When to apply this theory?
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>          - How valid are the research methods?
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>          - How strong is the evidence?
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>          - How logical is the argument?
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>          - How does this fit in to other research in the field?
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>          - What do I need to find out next?
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>:END:
</span></code></pre></div>
        - When to apply this?
    -</p>
<hr />
<div class="language-text highlight"><pre><span></span><code>- abstract &amp; reflect
</code></pre></div>
<p><code>org
:main-idea-checkbox:
          - What is this aims?
          - What is the their research question?
          - What is the author arguing?
          - What is their answer to the question?
          - What points support their argument?
          - What are their main reasons?
          - What evidence have they used to support their argument?
          - What’s the significance of these facts?
          - What principle are they based on?
          - How can I apply them?  How do they fit in with what I already know?
          - What’s beyond them?
          - What're supporting details and explanations?

:END:</code>
        - Main points
    - 📖 Scope
        - Scopes and namespace
            - <img alt="python variable scopes" src="https://favtutor.com/resources/images/uploads/mceu_14589579711675226532035.jpg" />
            - It is important when a symbol is hide/blocked by another symbol
        - built-in scope
            - <code>print</code>, <code>True</code>, <code>False</code> etc are located in bult-in scope. If a symbol is not in <em>module</em> scope or current LEG, search in built-in scope. This is #LEGB
        - Local Scope
            - inside a function. So it also called <em>function local scope</em>
        - Enclosing Scope
            - <strong>nonlocal scope</strong>
            - <strong>nonlocal</strong>
- The <code>nonlocal</code> keyword is used in nested functions to declare that a variable refers to a variable in the nearest enclosing scope that is not global. This means if you have a nested function and you want to modify a variable from the outer (enclosing) function, you&rsquo;d use <code>nonlocal</code>. Sometime the <em>nonlocal</em> variable also been called <strong>free variable</strong>
- free variable
- Use the keyword <code>nonlocal</code> to declare that the variable is not local.
- When nonlocal can be omitted
    - if it is read after write or read only, you can skip <code>nonlocal</code> keyword
            - nested function create an outer and inner scope, use <strong>nonlocal</strong> keyword to refer to the outer scope instead of create a new local variable</p>
</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">def</span> <span class="nf">outer</span><span class="p">():</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;Favtutor&quot;</span> <span class="c1"># Local Variable</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>        <span class="k">nonlocal</span> <span class="n">string</span> <span class="c1">#declaring a non local variable</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>        <span class="n">string</span><span class="o">=</span> <span class="s2">&quot;Python Favtutor Classes&quot;</span> <span class="c1"># Overwriting value of a variable string</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;inner function:&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>    <span class="n">inner</span><span class="p">()</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;outer function:&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="n">outer</span><span class="p">()</span>
</span></code></pre></div>
        - Global scope
- A variable created in the main body of the Python code is a <strong>global</strong> variable and belongs to the global scope. aka <em>module scope</em> or <em>file scope</em>. It spans a <strong>single file</strong> only
- Global Keyword
    - If you need to create a global variable, but are stuck in the local scope, you can use the <code>global</code> keyword.
    - The <code>global</code> keyword makes the variable global.</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  def myfunc():
    global x  # create a global variable
    x = 300
  myfunc()
  print(x)
  ```
    - Global and local
</code></pre></div>
<ul>
<li><strong>The main difference is that Global is used to access and modify global variables from within a function, while nonlocal is used to access and modify variables from the nearest enclosing scope that is not global.</strong></li>
<li>when python encounter a func definition at compile time. It scans for labels/var that have assigned to them <strong>anywhere</strong> in the function. If the label has not been specified as <em>global</em> it is a local</li>
<li>Var referenced but not assigned  anywhere in the func will not be local and python at runtime look for them in <strong>enclosing</strong> scopes</li>
<li>Nonlocal declarations in a local scope do not require the variable to be pre-bound (it declared in outer scope), which is another fundamental distinction between them. These variables must already have been bound in the surrounding namespace(outer function) to avoid syntax errors.</li>
<li>While a nonlocal statement allows for the alteration of an enclosing scope variable in the local scope, a global statement allows for the modification of a global variable in the local scope. Nonlocal variables must already exist, although global variables can be declared with brand-new variables.</li>
<li>Sample</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="k">def</span> <span class="nf">f3</span><span class="p">():</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>  <span class="k">global</span> <span class="n">a</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>  <span class="n">a</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># this refer to the a at line 1</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="k">def</span> <span class="nf">f4</span><span class="p">():</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># this refer to a at next line and will throw a runtime error</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>  <span class="n">a</span> <span class="o">=</span> <span class="mi">100</span>
</span></code></pre></div>
        - <strong>del</strong> a symbol in current scope
- e.g</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nb">print</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="n">n</span><span class="p">)</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nb">print</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">del</span> <span class="nb">print</span>
</span></code></pre></div>
        - Cell object
- <strong>Cell</strong> objects are used to implement variables referenced by multiple scopes. For each such variable, a cell object is created to store the value; the local variables of each stack frame that references the value contains a reference to the cells from outer scopes which also use that variable. When the value is accessed, the value contained in the cell is used instead of the cell object itself. This de-referencing of the cell object requires support from the generated byte-code; these are not automatically de-referenced when accessed. Cell objects are not likely to be useful elsewhere.
- ((650f9ddb-a02a-45cf-9524-8c395f42f66e))
- Cell is important to understand <strong>free variables</strong> used in closure
    - 📖 Closure
        - When closure created, it put the  <strong>nonlocal</strong> and <strong>global</strong> variable into a dict ((650f9d5c-c95d-41d3-8f60-6d6ada6c32f2))  and closure can be introspect with <code>__closure__</code>
        - if there is no ((65100808-8929-4581-a57b-c1f9470e4eb6)) there is no closure
        - Use closure to remember state
- ((650fb53c-bad9-4c9b-87c7-acc3a3d2a8b8))
- When counter() created a closure. It include a reference to counter/cell. So each time <code>fn()</code> called, count will change
        - Multiple instance of Closures
- Each time create a new closure, a <strong>new</strong> scope/env/capture will also created.</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="n">f1</span> <span class="o">=</span> <span class="n">counter</span><span class="p">()</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="n">f2</span> <span class="o">=</span> <span class="n">counter</span><span class="p">()</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="n">f1</span><span class="p">()</span> <span class="c1"># -&gt; 1</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="n">f1</span><span class="p">()</span> <span class="c1"># -&gt; 2</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="n">f2</span><span class="p">()</span> <span class="c1"># -&gt; 1</span>
</span></code></pre></div>
        - Shared scope and share reference/cell
- Following code</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">adders</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>  <span class="n">adders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="n">adders</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="mi">1</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">4</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="n">adders</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">1</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">4</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="n">adders</span><span class="p">[</span><span class="mi">2</span><span class="p">](</span><span class="mi">1</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">4</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="c1"># vs</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="n">adders</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>  <span class="n">adders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">n</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="n">adders</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="mi">1</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">2</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="n">adders</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">1</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">3</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="n">adders</span><span class="p">[</span><span class="mi">2</span><span class="p">](</span><span class="mi">1</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">4</span>
</span></code></pre></div>
- The reason n is <strong>3</strong> for each adder closure is:
    - n is a share scope object in for loop
    - it does not recreated each time
    - each adder has a ((650f9d5c-c95d-41d3-8f60-6d6ada6c32f2)) which is reference to <code>n</code>
    - It is important to know closure scope value is stored in ((650f9d5c-c95d-41d3-8f60-6d6ada6c32f2)) and store reference, when the value reference pointing to changed, closure value will also change .
    - Python does not evaluate free vars n until adders[i] func is called. And all of then refer to same n(3) when it is called
        - Replace Class with closure
- In many cases, the only reason we might have a single-method class is to store additional state for the use in method.
- A request class</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">import</span> <span class="nn">requests</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="k">class</span> <span class="nc">SourceTemplate</span><span class="p">:</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>        <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">format_map</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="n">github</span> <span class="o">=</span> <span class="n">SourceTemplate</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/repositories?since=</span><span class="si">{since}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="n">github</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></code></pre></div>
- A  closure implementation</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">def</span> <span class="nf">sourcetemplete</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>        <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">format_map</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>    <span class="k">return</span> <span class="n">load</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="n">load</span> <span class="o">=</span> <span class="n">sourcetemplete</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/repositories?since=</span><span class="si">{since}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="n">load</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></code></pre></div>
    - Recites
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>:howto-recite:
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>          Cover the notetaking column with a sheet of paper.  Then, looking at the questions or cue-words in the question and cue column only, say aloud, in your own words, the answers to the questions, facts, or ideas indicated by the cue-words.
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>:END:
</span></code></pre></div>
    -</p>
<hr />
<div class="language-text highlight"><pre><span></span><code>- Summary
    - main points
-
</code></pre></div>
<ul>
<li>Decorator<ul>
<li>Abstract<ul>
<li>The outer function is called the decorator, which takes the original function as an argument and returns a modified version of it.</li>
<li>So, in the most basic sense, a decorator is a callable that returns a callable.</li>
<li>((65101822-3477-4dbd-bf27-c6d41cb38579))</li>
</ul>
</li>
<li>Questions, keywords and cues
```org
:questions-keywords-cues:<ul>
<li>What do I already know?</li>
<li>Strengths and weaknesses?</li>
<li>When to apply this theory?</li>
<li>How valid are the research methods?</li>
<li>How strong is the evidence?</li>
<li>How logical is the argument?</li>
<li>How does this fit in to other research in the field?</li>
<li>What do I need to find out next?

:END:
```</li>
<li>
<h3 id="what-is-decorator"><a class="toclink" href="../../2023/12/19/python-basic/#what-is-decorator">What is Decorator?</a></h3>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<div class="language-text highlight"><pre><span></span><code>- abstract &amp; reflect
</code></pre></div>
<p><code>org
:main-idea-checkbox:
          - What is this aims?
          - What is the their research question?
          - What is the author arguing?
          - What is their answer to the question?
          - What points support their argument?
          - What are their main reasons?
          - What evidence have they used to support their argument?
          - What’s the significance of these facts?
          - What principle are they based on?
          - How can I apply them?  How do they fit in with what I already know?
          - What’s beyond them?
          - What're supporting details and explanations?

:END:</code>
        - Main points
    - 📖 Define a decorator
        - Using nested functions</p>
</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="k">def</span> <span class="nf">counter</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>        <span class="k">nonlocal</span> <span class="n">count</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Function </span><span class="si">{0}</span><span class="s1"> was called </span><span class="si">{1}</span><span class="s1"> times&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>    <span class="k">return</span> <span class="n">inner</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>  <span class="s2">&quot;return sun of two integers&quot;</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="n">add</span> <span class="o">=</span> <span class="n">counter</span><span class="p">(</span><span class="n">add</span><span class="p">)</span>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># Function add was called 1 times 3</span>
</span></code></pre></div>
- Pythonic way</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nd">@counter</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>  <span class="s2">&quot;mult return products of three number&quot;</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>  <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
</span></code></pre></div>
- There is a minor problems that mult is no longer mult after wrapped by operator. The <code>__doc__</code> and <code>__name__</code> changed. That when <code>@wraps is needed</code></p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="k">def</span> <span class="nf">counter</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>        <span class="k">nonlocal</span> <span class="n">count</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> was called </span><span class="si">{1}</span><span class="s2"> times&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>    <span class="k">return</span> <span class="n">inner</span>
</span></code></pre></div>
  It is same as this:</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="k">def</span> <span class="nf">counter</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>        <span class="k">nonlocal</span> <span class="n">count</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> was called </span><span class="si">{1}</span><span class="s2"> times&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>    <span class="n">inner</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>    <span class="n">inner</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="vm">__doc__</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>    <span class="k">return</span> <span class="n">inner</span>
</span></code></pre></div>
  And also this:
  <div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="k">def</span> <span class="nf">counter</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>        <span class="k">nonlocal</span> <span class="n">count</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> was called </span><span class="si">{1}</span><span class="s2"> times&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>    <span class="n">inner</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">fn</span><span class="p">)(</span><span class="n">inner</span><span class="p">)</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>    <span class="k">return</span> <span class="n">inner</span>
</span></code></pre></div>
-
    - 📖 Decorator with parameters (Decorator factory)
- <strong>Decorator with parameters</strong> are wrapper around existing decorators. Decorator returns <strong>closure</strong> but <strong>decorator with parameters</strong> returns decorator.
- A timer decorator with parameters</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="c1"># name factory is decorator factory which accepts parameters</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="k">def</span> <span class="nf">factory</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>  <span class="c1"># name timer is actual decorator</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>    <span class="k">def</span> <span class="nf">timer</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">perf_counter</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>      <span class="c1"># name inner is closure</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>        <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>            <span class="n">total_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>                <span class="n">start_time</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>                <span class="n">to_execute</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>                <span class="n">end_time</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>                <span class="n">execution_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>                <span class="n">total_time</span> <span class="o">+=</span> <span class="n">execution_time</span>
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>            <span class="n">average_time</span> <span class="o">=</span> <span class="n">total_time</span><span class="o">/</span><span class="n">number</span>
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> took </span><span class="si">{1:.8f}</span><span class="s1">s on an average to execute (tested for </span><span class="si">{2}</span><span class="s1"> times)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">execution_time</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>            <span class="k">return</span> <span class="n">to_execute</span>
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a>
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a>        <span class="k">return</span> <span class="n">inner</span>
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a>    <span class="k">return</span> <span class="n">timer</span>
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a>
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="nd">@factory</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="k">def</span> <span class="nf">function_1</span><span class="p">():</span>
</span><span id="__span-46-25"><a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000000</span><span class="p">):</span>
</span><span id="__span-46-26"><a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a>        <span class="k">pass</span>
</span><span id="__span-46-27"><a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a>
</span><span id="__span-46-28"><a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a><span class="nd">@factory</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span id="__span-46-29"><a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a><span class="k">def</span> <span class="nf">function_2</span><span class="p">():</span>
</span><span id="__span-46-30"><a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">):</span>
</span><span id="__span-46-31"><a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a>        <span class="k">pass</span>
</span><span id="__span-46-32"><a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a>
</span><span id="__span-46-33"><a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a><span class="n">function_1</span><span class="p">()</span>
</span><span id="__span-46-34"><a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a><span class="n">function_2</span><span class="p">()</span>
</span></code></pre></div>
    - Recites
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>:howto-recite:
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>          Cover the notetaking column with a sheet of paper.  Then, looking at the questions or cue-words in the question and cue column only, say aloud, in your own words, the answers to the questions, facts, or ideas indicated by the cue-words.
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>:END:
</span></code></pre></div>
    -</p>
<hr />
<div class="language-text highlight"><pre><span></span><code>- Summary
</code></pre></div>
<h3 id="-main-points"><a class="toclink" href="../../2023/12/19/python-basic/#-main-points">- main points</a></h3>
<ul>
<li>Tuple<ul>
<li>
<h2 id="wired-fact-tuple-is-not-created-with-it-is-with"><a class="toclink" href="../../2023/12/19/python-basic/#wired-fact-tuple-is-not-created-with-it-is-with">[[wired fact]] tuple is not created with <code>()</code> it is with <code>,</code></a></h2>
</li>
</ul>
</li>
<li><code>(1)</code> is not a tuple, it is a int, a single int of 1</li>
<li><code>1,</code> is a tuple</li>
<li><code>1, 2, 3</code> is a tuple</li>
<li><code>()</code> is used just to make code looks nicer</li>
<li>create a empty tuple using <code>tuple()</code>, <code>()</code> will do as well<ul>
<li>Pack and unpack</li>
</ul>
</li>
<li>Similar to ((650504dd-7dea-4c1a-9a18-71aa0e1f2200))</li>
<li><code>a, b, c = 1, 2, 3</code>; <code>a, b, c = [1, 2, 3]</code>; <code>(a, b, c) = [1, 2, 3]</code> they works the same way</li>
<li>behind the scenes: a, b, c is a <code>tuple</code></li>
<li><code>a, b, c = 'XYZ'</code>   <code>a='X', b='Y', c='Z'</code></li>
<li><code>for e in 12, 10, 'hello'</code></li>
<li>
<h3 id="swap-a-b-b-a"><a class="toclink" href="../../2023/12/19/python-basic/#swap-a-b-b-a">swap: <code>a, b = b, a</code></a></h3>
<code>python
  d = {'1': 1, '2':2}
  a, b = d # a can be '1' or '2'</code></li>
<li>
<p>extended unpack with <code>*</code> and <code>**</code>
    -
      <code>python
      a, *b = [1, 2, 3] # a=1, b = [2, 3]
      a, *b = 'XYZ' #b=['Y', 'Z']
      a, *b, c = 'abcd'  # b=['b', 'c']</code></p>
<ul>
<li>unpack can be used other way around</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="n">l1</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="n">l2</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="o">*</span><span class="n">l2</span><span class="p">]</span>  <span class="c1"># 1, 2, 3, 4</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="n">l3</span> <span class="o">=</span> <span class="s1">&#39;XYZ&#39;</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="p">[</span><span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="o">*</span><span class="n">l3</span><span class="p">]</span> <span class="c1"># [1, 2, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;]</span>
</span></code></pre></div>
- unpack dict with <code>**</code>
    - merge dict</p>
<div class="language-text highlight"><pre><span></span><code>  ``` python
  d1={1:1}
  d2={1:1, 2:2}
  d3={1:2: 3:3}
  d = {**d1, **d, **d3}  # duplicated value will be overwrote
  ```
</code></pre></div>
<ul>
<li>nested unpacking</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">]</span> <span class="c1"># b = [2, 3], c = X ...</span>
</span></code></pre></div>
- Ignore some of fields when unpack</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>   <span class="c1"># -&gt; c = 5</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">ignore</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>   <span class="c1"># -&gt; c = 5</span>
</span></code></pre></div>
    - Named Tuple
        - namedtuple is a <strong>class factory</strong> return a subclass of tuple.  You need a class_{ name} and array of element names to create it. The name can also be a string of space <code></code> or <code>,</code> separated words
          Syntax:</p>
</li>
</ul>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">TupleClass</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;elements&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">])</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="n">TupleClass</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span>  <span class="s1">&#39;string of names&#39;</span><span class="p">)</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="c1"># Sample</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="c1"># Now Point is a class</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span></code></pre></div>
- Name tuple is tuple so it can use all tuple operations</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="n">x</span> <span class="o">=</span> <span class="n">Point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="n">x</span> <span class="o">=</span> <span class="n">Point</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></div>
- Extend a tuple</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="n">Point1D</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point1D&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="n">fields</span> <span class="o">=</span> <span class="n">Point1D</span><span class="o">.</span><span class="n">_field</span><span class="o">+</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,)</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="n">Point1D</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point2D&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
</span></code></pre></div>
    - Optimization
- Object Interning In Python
    - Object interning is a technique used in Python to optimize memory usage and improve performance by reusing immutable objects instead of creating new instances. It is particularly useful for strings, integers and user-defined objects. By interning objects, Python can store only one copy of each distinct object in memory reducing memory consumption and speeding up operations that rely on object comparisons.
    - Syntax:
      <div class="language-python highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="n">interned_string</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="err">“</span><span class="n">string_to_intern</span><span class="err">”</span><span class="p">)</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="n">interned_string2</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">intern</span><span class="p">(</span><span class="err">“</span><span class="n">string_to_intern</span><span class="err">”</span><span class="p">)</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="n">interned_string</span> <span class="ow">is</span> <span class="n">interned_string2</span> <span class="c1"># faster than str cmp</span>
</span></code></pre></div>
    - All identifiers are interned
- Peephole
    - In Peephole optimization, Python optimizes code either by <strong>pre-calculating</strong> constant expressions or by <strong>membership tests</strong> (converting mutable data structures to immutable data structures.)
    - <a href="https://www.codesansar.com/python-programming/peephole-optimization.htm">Peephole Optimization in Python</a>
    - Find what is pre-calculation by using
      <code>your_obj.__code__.co_consts</code>
    -
-
-
-
-</p>
</li>
</ul>
</li>
</ul>
    <nav class="md-post__action">
      <a href="../../2023/12/19/python-basic/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-19 00:00:00">December 19, 2023</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="python-fundamental"><a class="toclink" href="../../2023/12/19/python-fundamental/">Python Fundamental</a></h2>
<details>
  <summary><h2>string.strip()</h2></summary>

  ### Usage
  1. remove all empty
  2. it allows arguments e.g. \'abbabbacdef\'.strip(\'ab\'). it remove both `a` and `b` (the sequence does not matter)

  ### exampls
  <div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;   aaa </span><span class="se">\n</span><span class="s2"> &quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>

<details>
  <summary><h2>calculate total of 1\~100 #card</h2></summary>

  ### Usage
    1. sum and range
  ### exampls
  <div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</span></code></pre></div>
</details>

<h3 id="sumrange1-100"><a class="toclink" href="../../2023/12/19/python-fundamental/#sumrange1-100">sum(range(1, 100))</a></h3>
<h2 id="remove-key-from-dict-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#remove-key-from-dict-card">remove 'key' from dict #card</a></h2>
<h3 id="del-dictkey"><a class="toclink" href="../../2023/12/19/python-fundamental/#del-dictkey">del dict['key']</a></h3>
<h2 id="merge-two-dict-dict1-and-dict2-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#merge-two-dict-dict1-and-dict2-card">merge two dict， dict1 and dict2 #card</a></h2>
<h3 id="dict1updatedict2"><a class="toclink" href="../../2023/12/19/python-fundamental/#dict1updatedict2">dict1.update(dict2)</a></h3>
<h2 id="deduplicate-from-a-list-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#deduplicate-from-a-list-card">deduplicate from a list #card</a></h2>
<h3 id="use-set"><a class="toclink" href="../../2023/12/19/python-fundamental/#use-set">use set</a></h3>
<p><code>list(set(mylist))</code> **</p>
<h2 id="args-and-kwargs-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#args-and-kwargs-card"><code>*args</code> and <code>**kwargs</code> #card</a></h2>
<h3 id="args-positional-arguments"><a class="toclink" href="../../2023/12/19/python-fundamental/#args-positional-arguments">args: positional arguments</a></h3>
<h3 id="kwargs-kv-arguments-dict"><a class="toclink" href="../../2023/12/19/python-fundamental/#kwargs-kv-arguments-dict">kwargs: kv arguments (dict)</a></h3>
<h2 id="what-is-dectorator-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#what-is-dectorator-card">What is dectorator #card</a></h2>
<h3 id="a-function-return-function-and-the-argument-is-a-function"><a class="toclink" href="../../2023/12/19/python-fundamental/#a-function-return-function-and-the-argument-is-a-function">a function return function and the argument is a function</a></h3>
<h2 id="difference-between-__init__-and-__new__-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#difference-between-__init__-and-__new__-card">difference between <code>__init__</code> and <code>__new__</code> #card</a></h2>
<h3 id="__init__-first-arg-is-self"><a class="toclink" href="../../2023/12/19/python-fundamental/#__init__-first-arg-is-self"><code>__init__</code> 是初始化方法，创建对象后，就立刻被默认调用了，可接收参数, first arg is <code>self</code></a></h3>
<h3 id="__new__-take-cls-which-is-current-class-it-need-to-return-the-new-class"><a class="toclink" href="../../2023/12/19/python-fundamental/#__new__-take-cls-which-is-current-class-it-need-to-return-the-new-class"><code>__new__</code> take <code>cls</code> which is current class. It need to return the new class</a></h3>
<h2 id="with-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#with-card"><code>with</code> #card</a></h2>
<h3 id="it-implement-finally-fileclose"><a class="toclink" href="../../2023/12/19/python-fundamental/#it-implement-finally-fileclose">it implement <code>finally: file.close()</code></a></h3>
<h2 id="12345-1491625-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#12345-1491625-card">[1,2,3,4,5] -&gt; [1,4,9,16,25] #card</a></h2>
<h3 id="list-comprehension-ii-for-i-in-l"><a class="toclink" href="../../2023/12/19/python-fundamental/#list-comprehension-ii-for-i-in-l">list comprehension: [i*i for i in l]</a></h3>
<h3 id="map-maplambda-x-xx-12345"><a class="toclink" href="../../2023/12/19/python-fundamental/#map-maplambda-x-xx-12345">map: map(lambda x: x*x, [1,2,3,4,5])</a></h3>
<h2 id="sabccba-deduplicate-and-sort-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#sabccba-deduplicate-and-sort-card">s='abccba' deduplicate and sort #card</a></h2>
<h3 id="joinsortedlistsets"><a class="toclink" href="../../2023/12/19/python-fundamental/#joinsortedlistsets"><code>''.join(sorted(list(set(s)))</code></a></h3>
<h2 id="what-is-difference-between-remove-discard-del-and-pop-when-remove-a-element-from-a-list-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#what-is-difference-between-remove-discard-del-and-pop-when-remove-a-element-from-a-list-card">What is difference between <code>remove</code> , <code>discard</code>, <code>del</code> and <code>pop</code> when remove a element from a list #card</a></h2>
<h3 id="removev-remove-first-element-with-value-v"><a class="toclink" href="../../2023/12/19/python-fundamental/#removev-remove-first-element-with-value-v"><code>remove(v)</code> remove first element with value v</a></h3>
<h3 id="del-l2-remove-element-from-l-at-pos-2"><a class="toclink" href="../../2023/12/19/python-fundamental/#del-l2-remove-element-from-l-at-pos-2">del l[2] remove element from l at pos 2</a></h3>
<h3 id="popidx-1"><a class="toclink" href="../../2023/12/19/python-fundamental/#popidx-1">pop(idx=-1)</a></h3>
<h3 id="discard-does-not-raise-exception-when-key-not-existed"><a class="toclink" href="../../2023/12/19/python-fundamental/#discard-does-not-raise-exception-when-key-not-existed">discard does not raise exception when key not existed</a></h3>
<h2 id="sort-a-dict-based-on-key-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#sort-a-dict-based-on-key-card">Sort a dict based on key #card</a></h2>
<h3 id="sorteddictitems-keylambda-i-i0-reversefalse"><a class="toclink" href="../../2023/12/19/python-fundamental/#sorteddictitems-keylambda-i-i0-reversefalse"><code>sorted(dict.items(),  key=lambda i: i[0], reverse=False)</code></a></h3>
<h2 id="find-all-odd-number-in-a-list-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#find-all-odd-number-in-a-list-card">find all odd number in a list #card</a></h2>
<h3 id="list-comprehension-i-for-i-in-l-if-i21"><a class="toclink" href="../../2023/12/19/python-fundamental/#list-comprehension-i-for-i-in-l-if-i21">list comprehension [i for i in l if i%2==1]</a></h3>
<h3 id="filter-filterlambda-i-i21-1234"><a class="toclink" href="../../2023/12/19/python-fundamental/#filter-filterlambda-i-i21-1234">filter(): filter(lambda i i%2==1, [1,2,3,4])</a></h3>
<h2 id="merge-two-list-l1-l2-and-sort-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#merge-two-list-l1-l2-and-sort-card">merge two list l1, l2 and sort #card</a></h2>
<h3 id="l1extendl2-sortedl1"><a class="toclink" href="../../2023/12/19/python-fundamental/#l1extendl2-sortedl1"><code>l1.extend(l2); sorted(l1)</code></a></h3>
<h2 id="a1-2-3-4-1234-card"><a class="toclink" href="../../2023/12/19/python-fundamental/#a1-2-3-4-1234-card"><code>a=[[1, 2], [3, 4]]</code> -&gt; [1,2,3,4] #card</a></h2>
<h3 id="two-steps-j-for-i-in-a-for-j-in-i-for-i-in-a-each-i-is-1-2-3-4-for-j-in-i-12-3-4"><a class="toclink" href="../../2023/12/19/python-fundamental/#two-steps-j-for-i-in-a-for-j-in-i-for-i-in-a-each-i-is-1-2-3-4-for-j-in-i-12-3-4">two steps <code>[ j for i in a for j in i  ]</code> ~for i in a ~ each i is [1, 2], [3, 4]; for j in i -&gt; 1,2 3, 4</a></h3>
<p>**</p>
    <nav class="md-post__action">
      <a href="../../2023/12/19/python-fundamental/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2022-12-16 00:00:00">December 16, 2022</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="nvim-trick"><a class="toclink" href="../../2022/12/16/nvim-trick/">nvim trick</a></h2>
<p>Some Neovim tricks</p>
<h2 id="nvimspurious-link-targetnvim-keymapspurious-link-targetkeymap"><a class="toclink" href="../../2022/12/16/nvim-trick/#nvimspurious-link-targetnvim-keymapspurious-link-targetkeymap">[<em>nvim</em>]{.spurious-link target=&rdquo;nvim&rdquo;} [<em>keymap</em>]{.spurious-link target=&rdquo;keymap&rdquo;}</a></h2>
<h3 id="c-y-scroll-up"><a class="toclink" href="../../2022/12/16/nvim-trick/#c-y-scroll-up">\&lt; C-Y &gt; scroll-up</a></h3>
<h3 id="c-u-scroll-down"><a class="toclink" href="../../2022/12/16/nvim-trick/#c-u-scroll-down">\&lt;C-U&gt; scroll-down</a></h3>
<h3 id="h-m-l-go-to-highmiddlelow-it-should-move-to-first-non-empty-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#h-m-l-go-to-highmiddlelow-it-should-move-to-first-non-empty-line"><code>H</code>, <code>M</code>, <code>L</code> go to high/middle/low it should move to first non empty line</a></h3>
<h3 id="d33-moves-the-cursor-to-the-specified-column-in-the-current-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#d33-moves-the-cursor-to-the-specified-column-in-the-current-line"><code>d33|</code> <code>|</code> moves the cursor to the specified column in the current line</a></h3>
<h3 id="find-replace"><a class="toclink" href="../../2022/12/16/nvim-trick/#find-replace">Find replace</a></h3>
<h4 id="stands-for-the-matched-words"><a class="toclink" href="../../2022/12/16/nvim-trick/#stands-for-the-matched-words"><code>&amp;</code> stands for the matched words</a></h4>
<h4 id="press-and-do-sxxx-the-search-is-omitted-and-it-is-the-current-selected-word"><a class="toclink" href="../../2022/12/16/nvim-trick/#press-and-do-sxxx-the-search-is-omitted-and-it-is-the-current-selected-word">press <code>*</code> and do <code>:%s//xxx/</code> the search is omitted and it is the current selected word</a></h4>
<h3 id="move-around"><a class="toclink" href="../../2022/12/16/nvim-trick/#move-around">Move around</a></h3>
<h4 id="-can-also-be-used-to-move-to-move-to-first-none-empty-char-of-next-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#-can-also-be-used-to-move-to-move-to-first-none-empty-char-of-next-line"><code>+</code> <code>-</code> can also be used to move to <code>+</code> Move to first none empty char of next line</a></h4>
<h4 id="cr-can-move-to-head-of-next-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#cr-can-move-to-head-of-next-line"><code>&lt;CR&gt;</code> can move to head of next line</a></h4>
<h3 id="word-and-word"><a class="toclink" href="../../2022/12/16/nvim-trick/#word-and-word">word and WORD</a></h3>
<h4 id="the-difference-between-words-and-words-is-that-the-former-only-include-letters-digits-and-numbers"><a class="toclink" href="../../2022/12/16/nvim-trick/#the-difference-between-words-and-words-is-that-the-former-only-include-letters-digits-and-numbers"><strong>The difference between words and WORDS is that the former only include letters, digits and numbers</strong>.</a></h4>
<h4 id="word-can-be-a-sequences-of-spaces-do-dw-inside-a-sequence-of-space-and-see-what-you-get-w-b-e-ge-are-word-motions"><a class="toclink" href="../../2022/12/16/nvim-trick/#word-can-be-a-sequences-of-spaces-do-dw-inside-a-sequence-of-space-and-see-what-you-get-w-b-e-ge-are-word-motions">word can be a sequences of spaces. do <code>dw</code> inside a sequence of space and see what you get. w, b, e, ge are word motions.</a></h4>
<h4 id="w-move-on-word-boudnary-following-are-word-hellovimword-12345-etc"><a class="toclink" href="../../2022/12/16/nvim-trick/#w-move-on-word-boudnary-following-are-word-hellovimword-12345-etc"><code>W</code> move on WORD boudnary. following are WORD <code>helloVimWord(){}</code>, <code>[1,2,3,4,5]</code> etc</a></h4>
<h3 id="i-a-there-is-also-i-and-a-insert-at-begin-of-line-and-end-of-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#i-a-there-is-also-i-and-a-insert-at-begin-of-line-and-end-of-line"><code>i</code> <code>a</code>; there is also <code>I</code> and <code>A</code> insert at begin of line and end of line</a></h3>
<h3 id="y-yank-it-is-same-as-yy-p-past-above"><a class="toclink" href="../../2022/12/16/nvim-trick/#y-yank-it-is-same-as-yy-p-past-above"><code>Y</code> yank; it is same as <code>yy</code>; <code>P</code> past above</a></h3>
<h3 id="s-and-s-was-remapped-in-hopleap-s-cl-s-cc"><a class="toclink" href="../../2022/12/16/nvim-trick/#s-and-s-was-remapped-in-hopleap-s-cl-s-cc"><code>s</code> and <code>S</code> was remapped in hop/leap. <code>s</code> -&gt; <code>cl</code> <code>S</code> -&gt; cc</a></h3>
<p>**</p>
<h3 id="x-delete-char-left-of-cursor-bs-in-norm-mode"><a class="toclink" href="../../2022/12/16/nvim-trick/#x-delete-char-left-of-cursor-bs-in-norm-mode"><code>X</code> delete char left of cursor (\&lt;BS&gt; in norm mode)</a></h3>
<h3 id="command-range-and-g-v-command"><a class="toclink" href="../../2022/12/16/nvim-trick/#command-range-and-g-v-command">command range and <code>g / v</code> command</a></h3>
<h4 id="current-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#current-line"><code>:.</code> current line</a></h4>
<h4 id="entire-file"><a class="toclink" href="../../2022/12/16/nvim-trick/#entire-file"><code>:%</code> entire file</a></h4>
<h4 id="last-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#last-line">`$~last line</a></h4>
<p>*** ~:12` line 12</p>
<h4 id="1214simportexportg-replace-from-line-12-to-14"><a class="toclink" href="../../2022/12/16/nvim-trick/#1214simportexportg-replace-from-line-12-to-14"><code>:12,14s/import/export/g</code> replace from line 12 to 14</a></h4>
<h4 id="12-from-current-line-to-current-line-12"><a class="toclink" href="../../2022/12/16/nvim-trick/#12-from-current-line-to-current-line-12"><code>:.,.+12</code> from current line to current line + 12</a></h4>
<h4 id="from-current-line-to-eof"><a class="toclink" href="../../2022/12/16/nvim-trick/#from-current-line-to-eof"><code>:.,$</code> from current line to eof</a></h4>
<h4 id="gimportd-delete-lines-include-import"><a class="toclink" href="../../2022/12/16/nvim-trick/#gimportd-delete-lines-include-import"><code>:g/import/d</code> delete lines include <code>import</code></a></h4>
<h4 id="gimportd-delete-lines-do-not-include-import-it-same-as-v-command-vimportd"><a class="toclink" href="../../2022/12/16/nvim-trick/#gimportd-delete-lines-do-not-include-import-it-same-as-v-command-vimportd"><code>:g!/import/d</code> delete lines do NOT include <code>import</code> it same as <code>v</code> command <code>:v/import/d</code></a></h4>
<h3 id="motion-vs-command"><a class="toclink" href="../../2022/12/16/nvim-trick/#motion-vs-command">motion vs <code>/</code> command</a></h3>
<h4 id="all-motion-can-be-replace-with-find-command-eg-dft-can-also-be-dtcr"><a class="toclink" href="../../2022/12/16/nvim-trick/#all-motion-can-be-replace-with-find-command-eg-dft-can-also-be-dtcr">all motion can be replace with find <code>/</code> command. e.g <code>dft</code> can also be <code>d/t&lt;cr&gt;</code></a></h4>
<h3 id="delete"><a class="toclink" href="../../2022/12/16/nvim-trick/#delete">delete</a></h3>
<h4 id="d0-delete-to-begin-of-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#d0-delete-to-begin-of-line"><code>d0</code> delete to begin of line</a></h4>
<h4 id="use-s-to-delete"><a class="toclink" href="../../2022/12/16/nvim-trick/#use-s-to-delete">use <code>s</code> to delete</a></h4>
<ol>
<li>
<p><code>:%s/abc//&lt;CR&gt;</code></p>
</li>
<li>
<p>it can also write as <code>:%s/abc&lt;CR&gt;</code></p>
</li>
</ol>
<h4 id="db-backward-delete-word"><a class="toclink" href="../../2022/12/16/nvim-trick/#db-backward-delete-word"><code>db</code> backward delete word</a></h4>
<h4 id="dvb-and-dve-delete-inclusive-dvge"><a class="toclink" href="../../2022/12/16/nvim-trick/#dvb-and-dve-delete-inclusive-dvge"><code>dvb</code> and <code>dve</code> delete <code>inclusive</code> ; <code>dvge</code>;</a></h4>
<h4 id="das-dap"><a class="toclink" href="../../2022/12/16/nvim-trick/#das-dap"><code>das</code> <code>dap</code></a></h4>
<h4 id="df-search-backward-and-delete"><a class="toclink" href="../../2022/12/16/nvim-trick/#df-search-backward-and-delete"><code>dF*</code> search backward and delete</a></h4>
<h4 id="with-surround-di-ca-da-etc"><a class="toclink" href="../../2022/12/16/nvim-trick/#with-surround-di-ca-da-etc">with surround <code>di*</code> <code>ca*</code> <code>da*</code> etc</a></h4>
<h4 id="dh-delete-1-char-to-the-left-d3h-delete-3chars-to-the-right"><a class="toclink" href="../../2022/12/16/nvim-trick/#dh-delete-1-char-to-the-left-d3h-delete-3chars-to-the-right"><code>dh</code> delete 1 char to the left; <code>d3h</code> delete 3chars to the right</a></h4>
<p><strong>*</strong></p>
<h3 id="vimg"><a class="toclink" href="../../2022/12/16/nvim-trick/#vimg">#vim<sub>g</sub></a></h3>
<h4 id="g0-go-to-0-same-as-gg"><a class="toclink" href="../../2022/12/16/nvim-trick/#g0-go-to-0-same-as-gg"><code>g0</code> go to 0; same as <code>gg</code></a></h4>
<h4 id="ge-jump-back-end-of-word"><a class="toclink" href="../../2022/12/16/nvim-trick/#ge-jump-back-end-of-word"><code>ge</code> jump back end of word</a></h4>
<h4 id="g-it-similar-to-macro-a-command-in-vim-that-repeats-the-last-substitution-s-command-on-all-lines-in-the-file-its-equivalent-to-sg-where-reuses-the-last-search-pattern-and-reuses-the-last-replacement-string"><a class="toclink" href="../../2022/12/16/nvim-trick/#g-it-similar-to-macro-a-command-in-vim-that-repeats-the-last-substitution-s-command-on-all-lines-in-the-file-its-equivalent-to-sg-where-reuses-the-last-search-pattern-and-reuses-the-last-replacement-string"><code>g&amp;</code> it similar to macro, a command in Vim that repeats the last substitution (<code>:s</code>) command on all lines in the file. It's equivalent to <code>:%s//~/g</code>, where <code>//</code> reuses the last search pattern, and <code>~</code> reuses the last replacement string.</a></h4>
<h4 id="gj-join-cnt-lines-j-join-with-remove-indent-also-works-in-visual-mode"><a class="toclink" href="../../2022/12/16/nvim-trick/#gj-join-cnt-lines-j-join-with-remove-indent-also-works-in-visual-mode"><code>gJ</code> join [cnt] lines <code>J</code>: join with remove indent, also works in visual mode</a></h4>
<h4 id="gq-format-text"><a class="toclink" href="../../2022/12/16/nvim-trick/#gq-format-text"><code>gq</code> format text</a></h4>
<h4 id="wrap-gj-gk-jump-inside-long-lines-g-g"><a class="toclink" href="../../2022/12/16/nvim-trick/#wrap-gj-gk-jump-inside-long-lines-g-g">wrap: <code>gj</code>, <code>gk</code> jump inside long lines , <code>g$</code>, <code>g^</code></a></h4>
<h4 id="gc-a-in-visual-moderange-increase-number-of-each-line-based-on-fist-value-in-range-eg-1-1-1-1-1-2-3-4"><a class="toclink" href="../../2022/12/16/nvim-trick/#gc-a-in-visual-moderange-increase-number-of-each-line-based-on-fist-value-in-range-eg-1-1-1-1-1-2-3-4"><code>g&lt;C-A&gt;</code> in visual mode/range, increase number of each line based on fist value in range. e.g. <code>1 1 1 1</code> -&gt; <code>1 2 3 4</code></a></h4>
<h4 id="guu-text-obj-capitalization-eg-gu-guw-guu-whole-line-gu3w-gufk-lowcase-to-letter-k"><a class="toclink" href="../../2022/12/16/nvim-trick/#guu-text-obj-capitalization-eg-gu-guw-guu-whole-line-gu3w-gufk-lowcase-to-letter-k"><code>gu|U</code> + text obj capitalization, e.g. <code>gu$</code> <code>guW</code>, <code>guu</code> whole line, <code>gU3w</code>, <code>gufk</code> (lowcase to letter k)</a></h4>
<h4 id="g-similar-to-guu"><a class="toclink" href="../../2022/12/16/nvim-trick/#g-similar-to-guu">`g~` similar to <code>gu|U</code></a></h4>
<h4 id="gv-re-select-text"><a class="toclink" href="../../2022/12/16/nvim-trick/#gv-re-select-text"><code>gv</code> re-select text</a></h4>
<h4 id="g-apply-the-replace-changes-to-full-document-it-is-helpful-when-you-need-to-replace-in-one-line-and-check-if-replace-is-correct-and-apply-to-full-text"><a class="toclink" href="../../2022/12/16/nvim-trick/#g-apply-the-replace-changes-to-full-document-it-is-helpful-when-you-need-to-replace-in-one-line-and-check-if-replace-is-correct-and-apply-to-full-text"><code>g&amp;</code> apply the replace changes to full document. It is helpful when you need to replace in one line and check if replace is correct and apply to full text</a></h4>
<p><strong>*</strong></p>
<h3 id="search-and-replace"><a class="toclink" href="../../2022/12/16/nvim-trick/#search-and-replace">Search and replace</a></h3>
<h4 id="s-match-a-none-empty-line-is-what-was-matched"><a class="toclink" href="../../2022/12/16/nvim-trick/#s-match-a-none-empty-line-is-what-was-matched"><code>*%s/.$/&amp;;/*</code> <code>.$</code> match a none empty line `&amp;~is what was matched</a></h4>
<p>*** ~:v/^<span class="arithmatex">\(/s/\)</span>/;`</p>
<ol>
<li>
<p><code>:v</code> inverse find <code>/^$</code> is empty line</p>
</li>
<li>
<p><code>/s/$/;</code> command of <code>v</code>; replace EOL to <code>;</code></p>
</li>
</ol>
<h4 id="ze-ze-zero-width-ending-split-the-search-pattern-into-two-first-half-is-match-can-be-used-later-on-eg-endzeiffor-match-both-endif-and-endfor-but-the-matched-pattern-is-end-so-svendzeiffor_g-replace-endif-to-end_if"><a class="toclink" href="../../2022/12/16/nvim-trick/#ze-ze-zero-width-ending-split-the-search-pattern-into-two-first-half-is-match-can-be-used-later-on-eg-endzeiffor-match-both-endif-and-endfor-but-the-matched-pattern-is-end-so-svendzeiffor_g-replace-endif-to-end_if"><code>\ze</code>: <code>\ze</code> Zero-width ending split the search pattern into two, first half is match can be used later on, e.g. <code>end\ze(if|for)</code> match both <code>endif</code> and <code>endfor</code> but the matched pattern is <code>end</code> so <code>:s/\vend\ze(if|for)/&amp;_/g</code> replace <code>endif</code> to <code>end_if</code></a></h4>
<h3 id="putrange110-add-110-to-buffer"><a class="toclink" href="../../2022/12/16/nvim-trick/#putrange110-add-110-to-buffer"><code>put=range(1,10)</code> add 1~10 to buffer</a></h3>
<h3 id="c-r-eg-c-rrange110-use-register-with-value-of-expression"><a class="toclink" href="../../2022/12/16/nvim-trick/#c-r-eg-c-rrange110-use-register-with-value-of-expression"><code>&lt;C-R&gt;=</code> e.g. <code>&lt;C-R&gt;=range(1,10)</code> use register with value of expression</a></h3>
<h3 id="indentation"><a class="toclink" href="../../2022/12/16/nvim-trick/#indentation">indentation</a></h3>
<h4 id="v-indent-current-line-to-the-right"><a class="toclink" href="../../2022/12/16/nvim-trick/#v-indent-current-line-to-the-right"><code>v&gt;</code> indent current line to the right</a></h4>
<h4 id="g-indent-from-current-line-the-the-end-of-file-to-the-right"><a class="toclink" href="../../2022/12/16/nvim-trick/#g-indent-from-current-line-the-the-end-of-file-to-the-right"><code>&gt;G</code> indent from current line the the end of file to the right</a></h4>
<h4 id="g-remove-indent-from-current-to-eof"><a class="toclink" href="../../2022/12/16/nvim-trick/#g-remove-indent-from-current-to-eof"><code>=G</code> remove indent from current to eof</a></h4>
<h4 id="indent-to-right-from-begin-of-block-to-current-line"><a class="toclink" href="../../2022/12/16/nvim-trick/#indent-to-right-from-begin-of-block-to-current-line"><code>&gt;{</code> indent to right from begin of block to current line</a></h4>
<h4 id="in-visual-mode-indent-current-line-based-on-context"><a class="toclink" href="../../2022/12/16/nvim-trick/#in-visual-mode-indent-current-line-based-on-context"><code>=</code> in visual mode, indent current line (based on context)</a></h4>
<h4 id="indent-to-the-right-with-normal-mode"><a class="toclink" href="../../2022/12/16/nvim-trick/#indent-to-the-right-with-normal-mode"><code>&gt;&gt;</code> indent to the right with normal mode</a></h4>
<h3 id="httpswwwvimgolfcomchallenges596dd9ca448256000c000011"><a class="toclink" href="../../2022/12/16/nvim-trick/#httpswwwvimgolfcomchallenges596dd9ca448256000c000011"><a href="https://www.vimgolf.com/challenges/596dd9ca448256000c000011">https://www.vimgolf.com/challenges/596dd9ca448256000c000011</a></a></h3>
<h3 id="httpswwwvimgolfcomchallenges5ba020f91abf2d000951055c"><a class="toclink" href="../../2022/12/16/nvim-trick/#httpswwwvimgolfcomchallenges5ba020f91abf2d000951055c"><a href="https://www.vimgolf.com/challenges/5ba020f91abf2d000951055c">https://www.vimgolf.com/challenges/5ba020f91abf2d000951055c</a></a></h3>
<h2 id="fugutive-diff-merge"><a class="toclink" href="../../2022/12/16/nvim-trick/#fugutive-diff-merge">Fugutive diff merge</a></h2>
<h3 id="reference-httpvimcastsorgepisodesfugitive-vim-resolving-merge-conflicts-with-vimdiff"><a class="toclink" href="../../2022/12/16/nvim-trick/#reference-httpvimcastsorgepisodesfugitive-vim-resolving-merge-conflicts-with-vimdiff">reference <code>http://vimcasts.org/episodes/fugitive-vim-resolving-merge-conflicts-with-vimdiff/</code></a></h3>
<h3 id="gdiff-are-used-to-merge-diff-conflicts-you-can-also-use-gvdiffsplit-it-opens"><a class="toclink" href="../../2022/12/16/nvim-trick/#gdiff-are-used-to-merge-diff-conflicts-you-can-also-use-gvdiffsplit-it-opens"><code>Gdiff</code> are used to merge diff conflicts. You can also use <code>Gvdiffsplit!</code> It opens</a></h3>
<h4 id="leftthe-branch-you-used-to-work-on-or-local-branch-the-buff-is-named-as-fugutive2"><a class="toclink" href="../../2022/12/16/nvim-trick/#leftthe-branch-you-used-to-work-on-or-local-branch-the-buff-is-named-as-fugutive2">left(the branch you used to work on, or local branch) . The buff is named as fugutive//2</a></h4>
<h4 id="middle-the-current-working-file"><a class="toclink" href="../../2022/12/16/nvim-trick/#middle-the-current-working-file">middle the current working file,</a></h4>
<h4 id="right-buffer-which-is-the-remote-branch-that-you-trying-to-merged-into-current-branch-remote-the-buffer-named-fugutive3"><a class="toclink" href="../../2022/12/16/nvim-trick/#right-buffer-which-is-the-remote-branch-that-you-trying-to-merged-into-current-branch-remote-the-buffer-named-fugutive3">right buffer which is the remote branch that you trying to merged into current branch (remote). the buffer named fugutive://3</a></h4>
<h4 id="if-the-cursor-in-middle-buffer-diffget-2-get-changes-from-left-file-and-use-c-to-jump-to-next-merge-conflict-and-use-diffupdate-to-refresh-file"><a class="toclink" href="../../2022/12/16/nvim-trick/#if-the-cursor-in-middle-buffer-diffget-2-get-changes-from-left-file-and-use-c-to-jump-to-next-merge-conflict-and-use-diffupdate-to-refresh-file">If the cursor in middle buffer, <code>diffget //2</code> get changes from left file and use <code>]c</code> to jump to next merge conflict. and use <code>diffupdate</code> to refresh file</a></h4>
<h4 id="when-done-use-only-to-close-other-windows"><a class="toclink" href="../../2022/12/16/nvim-trick/#when-done-use-only-to-close-other-windows">when done, use <code>only</code> to close other windows</a></h4>
<h4 id="you-can-use-diffput-1-to-put-changes-throught-in-fugutive-dp-default-alias-to-diffput-1"><a class="toclink" href="../../2022/12/16/nvim-trick/#you-can-use-diffput-1-to-put-changes-throught-in-fugutive-dp-default-alias-to-diffput-1">You can use <code>diffput 1</code> to put changes throught. in fugutive, <code>dp</code> default alias to <code>diffput 1</code></a></h4>
<h4 id="gwrite"><a class="toclink" href="../../2022/12/16/nvim-trick/#gwrite"><code>Gwrite!</code></a></h4>
<h2 id="diffview"><a class="toclink" href="../../2022/12/16/nvim-trick/#diffview">Diffview</a></h2>
<h3 id="if-git-in-merge-status-diffviewopen-will-show-the-conflicts-files"><a class="toclink" href="../../2022/12/16/nvim-trick/#if-git-in-merge-status-diffviewopen-will-show-the-conflicts-files">If git in merge status, <code>DiffViewOpen</code> will show the conflicts files</a></h3>
<h3 id="leadercoctcbca-select-ours-theirs-base-and-all-or-dx-choose-none"><a class="toclink" href="../../2022/12/16/nvim-trick/#leadercoctcbca-select-ours-theirs-base-and-all-or-dx-choose-none"><code>&lt;Leader&gt;co|ct|cb|ca</code> select Ours, Theirs, Base and All or <code>dx</code> choose none</a></h3>
<p>**</p>
    <nav class="md-post__action">
      <a href="../../2022/12/16/nvim-trick/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2022-05-10 00:00:00">May 10, 2022</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="dynamo-and-lock"><a class="toclink" href="../../2022/05/10/dynamo-and-lock/">dynamo and lock</a></h2>
<ul>
<li>Lock
** Optimistic Locking
*** With Optimistic Locking, there is always one attribute in your DynamoDB table that will act as a &ldquo;/version number./&rdquo; It can be a nano-id, an integer, or a timestamp. The version number associated with the record must also be sent when clients request data.
*** When client modifies the data. The version number present on the client side must be the same as the item&rsquo;s version number present in the table item. If it is the same, it means that no other user has changed the record, allowing the write to go through. However, if the version numbers are different, it&rsquo;s likely that another user has already updated the record, causing DynamoDB to reject your write by throwing the exception - <sub>ConditionalCheckFailedException</sub>. You can retrieve the item again (with newly updated data) and retry your update when this happens.
** Pessimistic Locking
*** Pessimistic Locking is another strategy used by DynamoDB to prevent concurrent updates to a particular row. It use DynamoDB Transactions API
*** typescript</li>
</ul>
<h2 id="begin_src-typescript"><a class="toclink" href="../../2022/05/10/dynamo-and-lock/#begin_src-typescript">+BEGIN_SRC typescript</a></h2>
<p>const AWS = require(&ldquo;aws-sdk&rdquo;);
const dynamoDB = new AWS.DynamoDB.DocumentClient({ region:&rsquo;us-east-1&rsquo; });</p>
<p>await dynamoDB.transactWrite({
  TransactItems: [
    {
      Put: { // Write an item to the Cart table
        Item: { // Actual Item
          id: &lsquo;777&rsquo;,
          count: &lsquo;1&rsquo;,
          description: &lsquo;Lorem ipsum&hellip;&rsquo;
        }
        TableName: &ldquo;Cart&rdquo;,
      },
    },
    {
      Update: { // Decrement count of items available to buy only if the count is greater than zero
        ConditionExpression: &ldquo;#count &gt; 0&rdquo;,
        ExpressionAttributeNames: { &ldquo;#count&rdquo;: &ldquo;count&rdquo; },
        ExpressionAttributeValues: {
         &ldquo;:value&rdquo;: 1,
        },
        Key: {
         id: &lsquo;777-000&rsquo;,
        }
        TableName: &ldquo;Items&rdquo;,
        UpdateExpression: &ldquo;SET #count = :count - :value&rdquo;,
        },
      },
    ],
  }).promise();</p>
<h2 id="end_src"><a class="toclink" href="../../2022/05/10/dynamo-and-lock/#end_src">+END_SRC</a></h2>
<ul>
<li>Benefits of Optimistic Locking
**</li>
</ul>
    <nav class="md-post__action">
      <a href="../../2022/05/10/dynamo-and-lock/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-10-12 00:00:00">October 12, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="tmux-is-a-standard-way-there-is-an-alternative"><a class="toclink" href="../../2020/10/12/alacritty-multi-session-with-neovim/">Tmux is a standard way, there is an alternative:</a></h2>
<p>If you are a user of neovim, you can use nvim to do terminal buffer management
Check this:
<img alt="Alacritty multi-sessions" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/in-post/2020-10-alacritty.jpg" /></p>
<p>Do not need to worry bugs in tumx regarding fonts display, keybinding......
To start nvim/vim in terminal mode, simply run <code>nvim -c ':term'</code></p>
    <nav class="md-post__action">
      <a href="../../2020/10/12/alacritty-multi-session-with-neovim/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-14 00:00:00">June 14, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="setup-postgres-debugger-env-with-docker"><a class="toclink" href="../../2020/06/14/setup-postgres-debugger-env-with-docker/">Setup postgres debugger env with docker</a></h2>
<h3 id="pldebugger-setup"><a class="toclink" href="../../2020/06/14/setup-postgres-debugger-env-with-docker/#pldebugger-setup">pldebugger setup</a></h3>
<p>pldebugger require recompile with postgresql source code. A little bit hard to setup.
Lucky enough, debian provides already compiled version.
Strech: version 10
Buster: version 12</p>
<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">postgres:12</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">MAINTAINER</span><span class="w"> </span><span class="s">ray@ray-x</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="k">ENV</span><span class="w"> </span>PG_MAJOR<span class="w"> </span><span class="m">12</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">ENV</span><span class="w"> </span>PG_VERSION<span class="w"> </span><span class="m">12</span>.3-1.pgdg100+1
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c"># Install the postgresql debugger</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--no-install-recommends<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span>postgresql-<span class="nv">$PG_MAJOR</span>-pldebugger
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">5432</span>
</span></code></pre></div>
<p>Start the docker and you should see:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>pgdbg           |
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>pgdbg           | PostgreSQL Database directory appears to contain a database; Skipping initialization
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>pgdbg           |
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>pgdbg           | 2020-06-11 03:00:46.211 UTC [1] LOG:  starting PostgreSQL 12.3 (Debian 12.3-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>pgdbg           | 2020-06-11 03:00:46.211 UTC [1] LOG:  listening on IPv4 address &quot;0.0.0.0&quot;, port 5432
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>pgdbg           | 2020-06-11 03:00:46.211 UTC [1] LOG:  listening on IPv6 address &quot;::&quot;, port 5432
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>pgdbg           | 2020-06-11 03:00:46.214 UTC [1] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>pgdbg           | 2020-06-11 03:00:46.290 UTC [26] LOG:  database system was shut down at 2020-06-21 03:00:32 UTC
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>pgdbg           | 2020-06-11 03:00:46.314 UTC [1] LOG:  database system is ready to accept connections
</span></code></pre></div>
<p>Notes that the logs began with <code>pgdbg</code> instead of <code>postgres</code></p>
<p>To debug with  dbeaver, install extension :</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="n">EXTENSION</span><span class="w"> </span><span class="n">pldbgapi</span><span class="p">;</span>
</span></code></pre></div>
<p>Install debug extension in dbeaver (if not yet)</p>
<p><code>Help -&gt; Install new software</code>
<img alt="dbeaver install" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/2020-06-install-plugin.jpg" />
Search and install <code>debugger</code>  Click &ldquo;ok&rdquo;, &ldquo;accept&rdquo;, &ldquo;confirm&rdquo;&hellip; to install
After restart dbeaver, you should see a debug icon:
<img alt="DebugIcon" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/2020-06-debug-beaver.jpg" /></p>
<p>Create a demo sql:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">test</span><span class="p">;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">DROP</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">test</span><span class="p">.</span><span class="n">somefunc</span><span class="p">(</span><span class="n">var</span><span class="w"> </span><span class="nb">integer</span><span class="p">);</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">test</span><span class="p">.</span><span class="n">somefunc</span><span class="p">(</span><span class="n">var</span><span class="w"> </span><span class="nb">integer</span><span class="p">)</span><span class="w"> </span><span class="k">RETURNS</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">DECLARE</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">   </span><span class="n">quantity</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="o">+</span><span class="n">var</span><span class="p">;</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="k">BEGIN</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">   </span><span class="n">RAISE</span><span class="w"> </span><span class="n">NOTICE</span><span class="w"> </span><span class="s1">&#39;Quantity here is %&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span><span class="w">      </span><span class="c1">--在这里的数量是30</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">   </span><span class="n">quantity</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">   </span><span class="c1">--</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">   </span><span class="c1">-- 创建一个子块</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">   </span><span class="c1">--</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">   </span><span class="k">DECLARE</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">      </span><span class="n">quantity</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">   </span><span class="k">BEGIN</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">      </span><span class="n">RAISE</span><span class="w"> </span><span class="n">NOTICE</span><span class="w"> </span><span class="s1">&#39;Quantity here is %&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span><span class="w">   </span><span class="c1">--在这里的数量是80</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">   </span><span class="k">END</span><span class="p">;</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">   </span><span class="n">RAISE</span><span class="w"> </span><span class="n">NOTICE</span><span class="w"> </span><span class="s1">&#39;Quantity here is %&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span><span class="w">      </span><span class="c1">--在这里的数量是50</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">   </span><span class="k">RETURN</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="k">END</span><span class="p">;</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="n">plpgsql</span><span class="p">;</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">test</span><span class="p">.</span><span class="n">somefunc</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
</span></code></pre></div>
<p>Configure a debug session:
Specify database, function, aurgument:
<img alt="Debug config" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/2020-06-debug-config.jpg" /></p>
<p>Start debug
<img alt="debug window" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/2020-06-debug-window.jpg" /></p>
    <nav class="md-post__action">
      <a href="../../2020/06/14/setup-postgres-debugger-env-with-docker/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-11 00:00:00">June 11, 2020</time>
          <!-- start customization -->
          
          <!-- end customization --></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="vim-clap-is-a-combination-of-fzf-ctrlp-leaderf-agack-nerdtreein-some-extends"><a class="toclink" href="../../2020/06/11/replace-fzf-with-vim-clap/">vim-clap is a combination of fzf, ctrlp, leaderF, Ag/Ack, nerdtree(in some extends) ......</a></h2>
<p>Check this:
<img alt="Clap" src="https://user-images.githubusercontent.com/8850248/73323347-24467380-4282-11ea-8dac-5ef5a1ee63bb.gif" /></p>
<p>And this:
Clap providers:
<a href="https://github.com/liuchengxu/vim-clap#providers">Clap providers</a></p>
<p>And this:
<img alt="Clap providers" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/clap-providers.jpg" /></p>
<p>Yes, it also provide a preview window......
Clap preview:
<img alt="Clap preview window" src="https://raw.githubusercontent.com/ray-x/ray-x.github.io/master/img/clap-preview.jpg" /></p>
<p>You can replace you fzf commands with vim-clap, e.g. my vimrc:
<div class="language-vim highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">noremap</span> <span class="p">&lt;</span>leader<span class="p">&gt;&lt;</span>s<span class="p">-</span>F<span class="p">&gt;</span> :Clap grep2 <span class="p">++</span>query<span class="p">=&lt;</span>cword<span class="p">&gt;&lt;</span>CR<span class="p">&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>cmap <span class="p">&lt;</span>leader<span class="p">&gt;&lt;</span>S<span class="p">-</span>F<span class="p">&gt;</span><span class="k">h</span> :Clap command_history<span class="p">&lt;</span>CR<span class="p">&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nb">noremap</span> <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="nb">ch</span> :Clap command_history<span class="p">&lt;</span>CR<span class="p">&gt;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nb">noremap</span> <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">cf</span> :Clap <span class="k">history</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="k">function</span><span class="p">!</span> s:<span class="k">history</span><span class="p">(</span><span class="k">arg</span><span class="p">)</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>  <span class="k">let</span> <span class="k">l</span>:query<span class="p">=</span><span class="s1">&#39;&#39;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>  <span class="k">let</span> <span class="k">l</span>:subcommand<span class="p">=</span><span class="s1">&#39;&#39;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  echo <span class="k">a</span>:<span class="k">arg</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>  <span class="k">if</span> len<span class="p">(</span><span class="k">a</span>:<span class="k">arg</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="k">let</span> <span class="k">l</span>:query<span class="p">=</span><span class="s1">&#39; ++query=&#39;</span><span class="p">+</span><span class="k">a</span>:<span class="k">arg</span>[<span class="m">1</span>]
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>  <span class="k">endif</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>  <span class="k">if</span> <span class="k">a</span>:<span class="k">arg</span>[<span class="m">0</span>] <span class="p">==</span> <span class="s1">&#39;:&#39;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="k">let</span> <span class="k">l</span>:subcommand <span class="p">=</span> <span class="s1">&#39;command_history&#39;</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="k">let</span> <span class="k">l</span>:query<span class="p">=</span>trim<span class="p">(</span><span class="k">a</span>:<span class="k">arg</span>[<span class="m">1</span>:]<span class="p">)</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>  <span class="k">elseif</span> <span class="k">a</span>:<span class="k">arg</span>[<span class="m">0</span>] <span class="p">==</span> <span class="s1">&#39;/&#39;</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    <span class="k">let</span> <span class="k">l</span>:subcommand <span class="p">=</span> <span class="s1">&#39;search_history&#39;</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>    <span class="k">let</span> <span class="k">l</span>:query<span class="p">=</span>trim<span class="p">(</span><span class="k">a</span>:<span class="k">arg</span>[<span class="m">1</span>:]<span class="p">)</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>  <span class="k">else</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    <span class="k">let</span> <span class="k">l</span>:subcommand <span class="p">=</span> <span class="s1">&#39;history&#39;</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    <span class="k">let</span> <span class="k">l</span>:query<span class="p">=</span>trim<span class="p">(</span><span class="k">a</span>:<span class="k">arg</span><span class="p">)</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>  <span class="k">endif</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>  <span class="k">if</span> len<span class="p">(</span><span class="k">l</span>:query<span class="p">)</span> <span class="p">&gt;</span> <span class="m">1</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>    <span class="k">let</span> <span class="k">l</span>:query<span class="p">=</span><span class="s1">&#39; ++query=&#39;</span> . <span class="k">l</span>:query
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>  <span class="k">endif</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>  exec <span class="s1">&#39;Clap &#39;</span>. <span class="k">l</span>:subcommand . <span class="k">l</span>:query
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="k">endfunction</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="c">&quot; noremap &lt;c-F&gt;:Clap grep2 ++query=@visual&lt;CR&gt;</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="nb">noremap</span> <span class="p">&lt;</span>s<span class="p">-</span>T<span class="p">&gt;</span> :Clap <span class="k">tags</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>nmap <span class="p">&lt;</span>S<span class="p">-</span>F2<span class="p">&gt;</span> :Clap filer<span class="p">&lt;</span>CR<span class="p">&gt;</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>command<span class="p">!</span> <span class="p">-</span>bang <span class="p">-</span>nargs<span class="p">=</span>* History <span class="k">call</span> s:<span class="k">history</span><span class="p">(&lt;</span><span class="k">q</span><span class="p">-</span>args<span class="p">&gt;)</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>command<span class="p">!</span> Files :Clap <span class="k">files</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>command<span class="p">!</span> Buffers :Clap <span class="k">buffers</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>command<span class="p">!</span> Tags :Clap proj_tags
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>command<span class="p">!</span> Buffers :Clap <span class="k">buffers</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>command<span class="p">!</span> Commits :Clap commits
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>command<span class="p">!</span> Gdiff :Clap git_diff_files
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a>command<span class="p">!</span> Jumps :Clap <span class="k">jumps</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>command<span class="p">!</span> Yanks :Clap yanks
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>command<span class="p">!</span> Windows :Clap windows
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>command<span class="p">!</span> Ag :Clap <span class="k">grep</span> <span class="p">++</span>query<span class="p">&lt;</span>cword<span class="p">&gt;</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>command<span class="p">!</span> Ag2 :Clap grep2 <span class="p">++</span>query<span class="p">&lt;</span>cword<span class="p">&gt;</span>
</span></code></pre></div></p>
<p>So in command mode, when you type <code>History</code> <code>History!</code> <code>History:</code> it will provides similar interface as fzf</p>
    <nav class="md-post__action">
      <a href="../../2020/06/11/replace-fzf-with-vim-clap/">
        Continue reading
      </a>
    </nav>
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__current">2</span> <a class="md-pagination__link" href="../3/">3</a> <a class="md-pagination__link" href="../4/">4</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../../archive/2024/" class="md-footer__link md-footer__link--next" aria-label="Next: 2024">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                2024
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2024 RayX
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ray-x" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/xb_I_dx" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/ray-x" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow - toc.integrate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
  
      <script src="../../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script src="../../../javascripts/custom.129bd6ad.min.js"></script>

  </body>
</html>